/*! For license information please see main.0160c02cfb92f81bc2dc.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/index.js":(e,t,s)=>{s.r(t);var a=s("./node_modules/lodash/each.js"),n=s.n(a),i=s("./node_modules/normalize-wheel/index.js"),o=s.n(i),h=s("./app/components/Canvas/index.js"),c=s("./app/components/Navigation.js"),d=s("./app/components/Preloader.js"),p=s("./app/pages/About/About.js"),r=s("./app/pages/Collections/Collections.js"),l=s("./app/pages/Detail/Detail.js"),u=s("./app/pages/Home/index.js");new class{constructor(){this.createContent(),this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createPages(),this.addLinkListeners(),this.addEventListeners(),this.update()}createNavigation(){this.navigation=new c.default({template:this.template})}createPreloader(){this.preloader=new d.default({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createCanvas(){this.canvas=new h.default({template:this.template})}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}createPages(){this.pages={about:new p.default,collections:new r.default,detail:new l.default,home:new u.default},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.canvas.onPreloaded(),this.preloader.destroy(),this.onResize(),this.page.show()}async onChange(e){this.canvas.onChangeStart(this.template),await this.page.hide();const t=await fetch(e);if(200===t.status){const e=await t.text(),s=document.createElement("div");s.innerHTML=e;const a=s.querySelector(".content");this.template=a.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.innerHTML=a.innerHTML,this.canvas.onChangeEnd(this.template),this.page=this.pages[this.template],this.page.create(),this.onResize(),this.page.show(),this.addLinkListeners()}else console.log("Error");console.log(t)}onResize(){window.requestAnimationFrame((e=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()})),this.page&&this.page.onResize&&this.page.onResize()}onTouchDown(e){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(e)}onTouchMove(e){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(e)}onTouchUp(e){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(e)}onWheel(e){const t=o()(e);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(t),this.page&&this.page.onWheel&&this.page.onWheel(t)}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),this.frame=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("mousewheel",this.onWheel.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const e=document.querySelectorAll("a");n()(e,(e=>{e.onclick=t=>{t.preventDefault();const{href:s}=e;this.onChange(s)}}))}}}},(function(e){e.h=()=>"491bf2a0e5a9759255bb"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi4wMTYwYzAyY2ZiOTJmODFiYzJkYy5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7cWNBMk5BLElBOU1BLE1BQ0VBLFdBQUFBLEdBRUVDLEtBQUtDLGdCQUVMRCxLQUFLRSxlQUNMRixLQUFLRyxrQkFDTEgsS0FBS0ksbUJBRUxKLEtBQUtLLGNBRUxMLEtBQUtNLG1CQUNMTixLQUFLTyxvQkFFTFAsS0FBS1EsUUFFUCxDQUVBSixnQkFBQUEsR0FDRUosS0FBS1MsV0FBYSxJQUFJQyxFQUFBQSxRQUFXLENBQUVDLFNBQVVYLEtBQUtXLFVBQ3BELENBRUFSLGVBQUFBLEdBQ0VILEtBQUtZLFVBQVUsSUFBSUMsRUFBQUEsUUFBVSxDQUMzQkMsT0FBU2QsS0FBS2MsU0FFaEJkLEtBQUtZLFVBQVVHLEtBQUssWUFBWWYsS0FBS2dCLFlBQVlDLEtBQUtqQixNQUN4RCxDQUVBRSxZQUFBQSxHQUNFRixLQUFLYyxPQUFRLElBQUlJLEVBQUFBLFFBQU8sQ0FDdEJQLFNBQVVYLEtBQUtXLFVBRW5CLENBRUFWLGFBQUFBLEdBQ0VELEtBQUttQixRQUFVQyxTQUFTQyxjQUFjLFlBQ3RDckIsS0FBS1csU0FBV1gsS0FBS21CLFFBQVFHLGFBQWEsZ0JBQzVDLENBRUFqQixXQUFBQSxHQUVFTCxLQUFLdUIsTUFBUSxDQUNYQyxNQUFPLElBQUlDLEVBQUFBLFFBQ1hDLFlBQWEsSUFBSUMsRUFBQUEsUUFDakJDLE9BQVEsSUFBSUMsRUFBQUEsUUFDWkMsS0FBTSxJQUFJQyxFQUFBQSxTQUVaL0IsS0FBS2dDLEtBQU9oQyxLQUFLdUIsTUFBTXZCLEtBQUtXLFVBRTVCWCxLQUFLZ0MsS0FBS0MsUUFHWixDQUtBakIsV0FBQUEsR0FDRWhCLEtBQUtjLE9BQU9FLGNBQ1poQixLQUFLWSxVQUFVc0IsVUFDZmxDLEtBQUttQyxXQUNMbkMsS0FBS2dDLEtBQUtJLE1BRVosQ0FFQSxjQUFNQyxDQUFTQyxHQUNidEMsS0FBS2MsT0FBT3lCLGNBQWN2QyxLQUFLVyxnQkFFekJYLEtBQUtn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S0FBS3FDLFNBQVNvQyxFQUFLLENBQ3BCLEdBRUwsa0JDek5GQyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2luZGV4LmpzIiwid2VicGFjazovL2Zsb2VtYS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiLy8g5YWz5LmO5pW05Liq572R6aG155qE5bGV56S65L+h5oGvXG5pbXBvcnQgZWFjaCBmcm9tICdsb2Rhc2gvZWFjaCc7XG5pbXBvcnQgTm9ybWFsaXplV2hlZWwgZnJvbSAnbm9ybWFsaXplLXdoZWVsJ1xuXG5pbXBvcnQgQ2FudmFzIGZyb20gJ2NvbXBvbmVudHMvQ2FudmFzJztcbmltcG9ydCBOYXZpZ2F0aW9uIGZyb20gJy4vY29tcG9uZW50cy9OYXZpZ2F0aW9uJztcbmltcG9ydCBQcmVsb2FkZXIgZnJvbSAnY29tcG9uZW50cy9QcmVsb2FkZXInXG5cbmltcG9ydCBBYm91dCBmcm9tIFwiLi9wYWdlcy9BYm91dC9BYm91dFwiO1xuaW1wb3J0IENvbGxlY3Rpb25zIGZyb20gXCIuL3BhZ2VzL0NvbGxlY3Rpb25zL0NvbGxlY3Rpb25zXCI7XG5pbXBvcnQgRGV0YWlsIGZyb20gXCIuL3BhZ2VzL0RldGFpbC9EZXRhaWxcIjtcbmltcG9ydCBIb21lIGZyb20gXCIuL3BhZ2VzL0hvbWVcIjtcblxuY2xhc3MgQXBwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8g5Y+s5ZSkXG4gICAgdGhpcy5jcmVhdGVDb250ZW50KClcbiAgICBcbiAgICB0aGlzLmNyZWF0ZUNhbnZhcygpXG4gICAgdGhpcy5jcmVhdGVQcmVsb2FkZXIoKVxuICAgIHRoaXMuY3JlYXRlTmF2aWdhdGlvbigpXG4gXG4gICAgdGhpcy5jcmVhdGVQYWdlcygpXG5cbiAgICB0aGlzLmFkZExpbmtMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gIH1cbiAgLy8g5Yid5aeL5YyW57G7XG4gIGNyZWF0ZU5hdmlnYXRpb24oKSB7XG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gbmV3IE5hdmlnYXRpb24oeyB0ZW1wbGF0ZTogdGhpcy50ZW1wbGF0ZSB9KTtcbiAgfVxuXG4gIGNyZWF0ZVByZWxvYWRlcigpe1xuICAgIHRoaXMucHJlbG9hZGVyPW5ldyBQcmVsb2FkZXIoe1xuICAgICAgY2FudmFzIDogdGhpcy5jYW52YXNcbiAgICB9KVxuICAgIHRoaXMucHJlbG9hZGVyLm9uY2UoJ2NvbXBsZXRlZCcsdGhpcy5vblByZWxvYWRlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgY3JlYXRlQ2FudmFzKCl7XG4gICAgdGhpcy5jYW52YXMgPW5ldyBDYW52YXMoe1xuICAgICAgdGVtcGxhdGUgOnRoaXMudGVtcGxhdGVcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlQ29udGVudCgpIHtcbiAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpOyAvL0RFUzogc2VsZWN0aW5nIHRoZSBjb250ZW50IGNsYXNzXG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMuY29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKTsgLy9ERVM6IGdldHRpbmcgdGhlIGRhdGFzZXQtdGVtcGxhdGVcbiAgfVxuXG4gIGNyZWF0ZVBhZ2VzKCkge1xuICAgIC8vIOWIneWni+WMlumhtemdoizlhYjlu7rmlofmoaPvvIzlnKjlhpnov5nkuKrvvIzku5bkvJroh6rliqjlvLnlh7ppbXBvcnRcbiAgICB0aGlzLnBhZ2VzID0ge1xuICAgICAgYWJvdXQ6IG5ldyBBYm91dCgpLFxuICAgICAgY29sbGVjdGlvbnM6IG5ldyBDb2xsZWN0aW9ucygpLFxuICAgICAgZGV0YWlsOiBuZXcgRGV0YWlsKCksXG4gICAgICBob21lOiBuZXcgSG9tZSgpLFxuICAgIH1cbiAgICB0aGlzLnBhZ2UgPSB0aGlzLnBhZ2VzW3RoaXMudGVtcGxhdGVdXG4gICAgLy8g5L2g5Zyo5ZOq5Liq6aG16Z2i5bCx5riy5p+T5LqG5ZOq5Liq6aG16Z2i77yMZGF0YTB0ZW1wYWx0ZeWug+S9v+W+l+S9oOWPr+S7peWcqCBIVE1MIOWFg+e0oOS4reWtmOWCqOaVsOaNru+8jOeEtuWQjumAmui/hyBKYXZhU2NyaXB0IOadpeivu+WPluWSjOS9v+eUqOi/meS6m+aVsOaNru+8jFxuICAgIHRoaXMucGFnZS5jcmVhdGUoKVxuXG4gICAgXG4gIH1cblxuICAvKipcbiAgICogRXZlbnRzXG4gICAqL1xuICBvblByZWxvYWRlZCgpe1xuICAgIHRoaXMuY2FudmFzLm9uUHJlbG9hZGVkKClcbiAgICB0aGlzLnByZWxvYWRlci5kZXN0cm95KClcbiAgICB0aGlzLm9uUmVzaXplKClcbiAgICB0aGlzLnBhZ2Uuc2hvdygpXG4gICAgLy8g6ZSA5q+BLemHjeaWsOWumuS5ieWwuuWvuC3pobXpnaLlsZXnpLpcbiAgfVxuXG4gIGFzeW5jIG9uQ2hhbmdlKHVybCl7Ly8g5ZCM5q2laHRtbOmHjOeahHVybOmTvuaOpe+8jOS9v+W+l+WcqGNoZWNr5pe25LiN5Lya55yL5Yiw5rKh5pyJ5pu05paw55qEY29udGVudOWQjeWtl1xuICAgIHRoaXMuY2FudmFzLm9uQ2hhbmdlU3RhcnQodGhpcy50ZW1wbGF0ZSlcbiAgICBcbiAgICBhd2FpdCB0aGlzLnBhZ2UuaGlkZSgpXG4gICAgLy8g5b2T54K55Ye75pe277yM5b2T5YmN6aG16Z2i5Lya6KKr6ZqQ6JePXG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKHVybClcbiAgICBpZihyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKXtcbiAgICAgIGNvbnN0IGh0bWw9YXdhaXQgcmVxdWVzdC50ZXh0KClcbiAgICAgIGNvbnN0IGRpdiA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgICAgZGl2LmlubmVySFRNTD1odG1sXG5cbiAgICAgIGNvbnN0ICBkaXZDb250ZW50ID1kaXYucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxuXG4gICAgICB0aGlzLnRlbXBsYXRlPWRpdkNvbnRlbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRlbXBsYXRlJylcblxuIFxuICAgICAgdGhpcy5uYXZpZ2F0aW9uLm9uQ2hhbmdlKHRoaXMudGVtcGxhdGUpXG5cbiAgICAgIHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnLHRoaXMudGVtcGxhdGUpXG4gICAgICB0aGlzLmNvbnRlbnQuaW5uZXJIVE1MPWRpdkNvbnRlbnQuaW5uZXJIVE1MXG5cbiAgICAgIHRoaXMuY2FudmFzLm9uQ2hhbmdlRW5kKHRoaXMudGVtcGxhdGUpXG5cbiAgICAgIHRoaXMucGFnZSA9IHRoaXMucGFnZXNbdGhpcy50ZW1wbGF0ZV1cbiAgICAgIC8vIOi/meS4qnRlbXBsYXRl5piv5paw55qE6aG16Z2i55qEdGVtcGxhdGVcbiAgICAgIFxuICAgICAgdGhpcy5wYWdlLmNyZWF0ZSgpXG4gICAgICB0aGlzLm9uUmVzaXplKClcbiAgICAgIHRoaXMucGFnZS5zaG93KClcbiAgICAgIHRoaXMuYWRkTGlua0xpc3RlbmVycygpXG4gICAgICAvLyDov5nph4zlj4jlhpnkuIDpgY3mmK/lm6DkuLrlnKjliJvlu7rmlrDnmoTpobXpnaLkuYvlkI7vvIzmnInkupvpobXpnaLph4zpnaLov5jmnInmlrDnmoTpk77mjqXvvIzmiYDku6XlnKjmjonkuIDmrKHov5nkuKrmlrnms5VcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicpXG4gICAgfVxuXG4gICAgLy8gaWYgKHJlcXVlc3Quc3RhdHVzKVxuICAgIGNvbnNvbGUubG9nKHJlcXVlc3QpXG4gIH1cblxuICBvblJlc2l6ZSgpIHtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8gPT57XG4gICAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25SZXNpemUpIHtcbiAgICAgICAgdGhpcy5jYW52YXMub25SZXNpemUoKTtcbiAgICAgIH1cbiAgICAgIC8vIOWkhOeQhueql+WPo+iwg+aVtOWkp+Wwj+S6i+S7tueahOWHveaVsOOAguW9k+a1j+iniOWZqOeql+WPo+Wkp+Wwj+aUueWPmOaXtu+8iOavlOWmgueUqOaIt+iwg+aVtOeql+WPo+Wkp+Wwj+aIluiAheiuvuWkh+WPkeeUn+aXi+i9rO+8ie+8jOS8muinpuWPkSBvblJlc2l6ZSDlh73mlbDjgIJcbiAgICB9KVxuICAgIFxuXG4gICAgaWYgKHRoaXMucGFnZSAmJiB0aGlzLnBhZ2Uub25SZXNpemUpIHtcbiAgICAgIHRoaXMucGFnZS5vblJlc2l6ZSgpO1xuICAgIH1cbiAgfVxuXG4gIG9uVG91Y2hEb3duKGV2ZW50KXtcbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25Ub3VjaERvd24pIHtcbiAgICAgIHRoaXMuY2FudmFzLm9uVG91Y2hEb3duKGV2ZW50KTtcbiAgICB9XG5cblxuICB9XG5cbiAgb25Ub3VjaE1vdmUoZXZlbnQpe1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoTW92ZSkge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaE1vdmUoZXZlbnQpO1xuICAgIH1cblxuICB9XG5cbiAgb25Ub3VjaFVwKGV2ZW50KXtcbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25Ub3VjaFVwKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vblRvdWNoVXAoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIG9uV2hlZWwoZXZlbnQpe1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRXaGVlbCA9IE5vcm1hbGl6ZVdoZWVsKGV2ZW50KTtcbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25XaGVlbCkge1xuICAgICAgdGhpcy5jYW52YXMub25XaGVlbChub3JtYWxpemVkV2hlZWwpO1xuICAgICAgLy8g6LCD55So55S75biD55qEb25XaGVlbOeahOaWueazle+8jOW5tuWwhuagh+WHhuWMluWkhOeQhuWQjueahOa7muWKqOWAvOS9nOS4uuWPguaVsOS8oOi/m+WOu1xuICAgIH1cbiAgIFxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLm9uV2hlZWwpIHtcbiAgICAgIHRoaXMucGFnZS5vbldoZWVsKG5vcm1hbGl6ZWRXaGVlbCk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogTG9vcFxuICAgKi9cblxuICB1cGRhdGUoKXsgLy8g5Yqo55S75oiW6aG16Z2i5pu05paw55qE5b6q546vXG4gICBcbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS51cGRhdGUpIHtcbiAgICAgIHRoaXMucGFnZS51cGRhdGUoKTtcbiAgICB9XG4gICAgLy8g5YWI5riy5p+T6aG16Z2i77yM5Zug5Li65pyJY29ycmVjdCBZIHBvc2l0aW9u77yM5omA5Lul5ZCO6Z2i55qEY2FudmFz55qEWeS5n+S8mui3n+edgOabtOaWsFxuXG4gICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLnVwZGF0ZSkge1xuICAgICAgdGhpcy5jYW52YXMudXBkYXRlKHRoaXMucGFnZS5zY3JvbGwpO1xuICAgIH1cblxuICAgIHRoaXMuZnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbmVyc1xuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcnMoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMub25XaGVlbC5iaW5kKHRoaXMpKVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Ub3VjaERvd24uYmluZCh0aGlzKSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vblRvdWNoVXAuYmluZCh0aGlzKSlcbiAgICAvLyDnlLXohJHnq6/nmoRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaERvd24uYmluZCh0aGlzKSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaFVwLmJpbmQodGhpcykpXG4gICAgLy8g56e75Yqo56uv55qEXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBhZGRMaW5rTGlzdGVuZXJzKCkgey8vIOmTvuaOpei3s+i9rOWkhOeQhlxuXG4gICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJylcbiAgICAvLyDpgInmi6nmiYDmnInpk77mjqXvvIxsaW5rc+aYr+aVsOe7hFxuXG4gICAgZWFjaChsaW5rcywgKGxpbmspID0+IHtcbiAgICAgIGxpbmsub25jbGljayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgY29uc3QgeyBocmVmIH0gPSBsaW5rXG5cbiAgICAgICAgdGhpcy5vbkNoYW5nZShocmVmKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbm5ldyBBcHAoKSIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjQ5MWJmMmEwZTVhOTc1OTI1NWJiXCIpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVDYW52YXMiLCJjcmVhdGVQcmVsb2FkZXIiLCJjcmVhdGVOYXZpZ2F0aW9uIiwiY3JlYXRlUGFnZXMiLCJhZGRMaW5rTGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJ1cGRhdGUiLCJuYXZpZ2F0aW9uIiwiTmF2aWdhdGlvbiIsInRlbXBsYXRlIiwicHJlbG9hZGVyIiwiUHJlbG9hZGVyIiwiY2FudmFzIiwib25jZSIsIm9uUHJlbG9hZGVkIiwiYmluZCIsIkNhbnZhcyIsImNvbnRlbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRBdHRyaWJ1dGUiLCJwYWdlcyIsImFib3V0IiwiQWJvdXQiLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb25zIiwiZGV0YWlsIiwiRGV0YWlsIiwiaG9tZSIsIkhvbWUiLCJwYWdlIiwiY3JlYXRlIiwiZGVzdHJveSIsIm9uUmVzaXplIiwic2hvdyIsIm9uQ2hhbmdlIiwidXJsIiwib25DaGFuZ2VTdGFydCIsImhpZGUiLCJyZXF1ZXN0IiwiZmV0Y2giLCJzdGF0dXMiLCJodG1sIiwidGV4dCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJkaXZDb250ZW50Iiwic2V0QXR0cmlidXRlIiwib25DaGFuZ2VFbmQiLCJjb25zb2xlIiwibG9nIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiXyIsIm9uVG91Y2hEb3duIiwiZXZlbnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJub3JtYWxpemVkV2hlZWwiLCJOb3JtYWxpemVXaGVlbCIsInNjcm9sbCIsImZyYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImVhY2giLCJsaW5rIiwib25jbGljayIsInByZXZlbnREZWZhdWx0IiwiaHJlZiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==