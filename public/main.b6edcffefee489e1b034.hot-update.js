/*! For license information please see main.b6edcffefee489e1b034.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/index.js":(e,t,n)=>{n.r(t);var s=n("./node_modules/lodash/each.js"),a=n.n(s),i=n("./node_modules/normalize-wheel/index.js"),o=n.n(i),h=n("./app/components/Canvas/index.js"),d=n("./app/components/Navigation.js"),c=n("./app/components/Preloader.js"),p=n("./app/pages/About/About.js"),r=n("./app/pages/Collections/Collections.js"),l=n("./app/pages/Detail/Detail.js"),u=n("./app/pages/Home/index.js");new class{constructor(){this.createContent(),this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createPages(),this.addLinkListeners(),this.addEventListeners(),this.onResize(),this.update()}createNavigation(){this.navigation=new d.default({template:this.template})}createPreloader(){this.preloader=new c.default({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createCanvas(){this.canvas=new h.default({template:this.template})}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}createPages(){this.pages={about:new p.default,collections:new r.default,detail:new l.default,home:new u.default},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.onResize(),this.canvas.onPreloaded(),this.page.show()}onPopState(){this.onChange({url:window.location.pathname,push:!1})}async onChange({url:e,push:t=!0}){this.canvas.onChangeStart(this.template,e),await this.page.hide();const n=await window.fetch(e);if(200===n.status){const s=await n.text(),a=document.createElement("div");t&&window.history.pushState({},"",e),a.innerHTML=s;const i=a.querySelector(".content");this.template=i.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.innerHTML=i.innerHTML,this.canvas.onChangeEnd(this.template),this.page=this.pages[this.template],this.page.create(),this.onResize(),this.page.show(),this.addLinkListeners()}else console.log("Error");console.log(n)}onResize(){window.requestAnimationFrame((e=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()})),this.page&&this.page.onResize&&this.page.onResize()}onTouchDown(e){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(e)}onTouchMove(e){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(e)}onTouchUp(e){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(e)}onWheel(e){const t=o()(e);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(t),this.page&&this.page.onWheel&&this.page.onWheel(t)}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),this.frame=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("popstate",this.onPopState.bind(this)),window.addEventListener("mousewheel",this.onWheel.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const e=document.querySelectorAll("a");a()(e,(e=>{e.onclick=t=>{t.preventDefault();const{href:n}=e;this.onChange({url:n})}}))}}}},(function(e){e.h=()=>"15d0fbb372ea3c7bcb5f"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLaUUsVUFBVS9DLEtBQUtsQixPQUV4RHVDLE9BQU9nQyxpQkFBaUIsU0FBVXZFLEtBQUtRLFNBQVNVLEtBQUtsQixNQUN2RCxDQUVBTSxnQkFBQUEsR0FFRSxNQUFNa0UsRUFBUW5ELFNBQVNvRCxpQkFBaUIsS0FHeENDLElBQUtGLEdBQVFHLElBQ1hBLEVBQUtDLFFBQVdiLElBQ2RBLEVBQU1jLGlCQUVOLE1BQU0sS0FBRUMsR0FBU0gsRUFFakIzRSxLQUFLcUMsU0FBUyxDQUFFQyxJQUFLd0MsR0FBTyxDQUM3QixHQUVMLGtCQzdPRkMsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9pbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIOWFs+S5juaVtOS4que9kemhteeahOWxleekuuS/oeaBr1xuaW1wb3J0IGVhY2ggZnJvbSAnbG9kYXNoL2VhY2gnO1xuaW1wb3J0IE5vcm1hbGl6ZVdoZWVsIGZyb20gJ25vcm1hbGl6ZS13aGVlbCdcblxuaW1wb3J0IENhbnZhcyBmcm9tICdjb21wb25lbnRzL0NhbnZhcyc7XG5pbXBvcnQgTmF2aWdhdGlvbiBmcm9tICcuL2NvbXBvbmVudHMvTmF2aWdhdGlvbic7XG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gJ2NvbXBvbmVudHMvUHJlbG9hZGVyJ1xuXG5pbXBvcnQgQWJvdXQgZnJvbSBcIi4vcGFnZXMvQWJvdXQvQWJvdXRcIjtcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tIFwiLi9wYWdlcy9Db2xsZWN0aW9ucy9Db2xsZWN0aW9uc1wiO1xuaW1wb3J0IERldGFpbCBmcm9tIFwiLi9wYWdlcy9EZXRhaWwvRGV0YWlsXCI7XG5pbXBvcnQgSG9tZSBmcm9tIFwiLi9wYWdlcy9Ib21lXCI7XG5cbmNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIOWPrOWUpFxuICAgIHRoaXMuY3JlYXRlQ29udGVudCgpXG5cbiAgICB0aGlzLmNyZWF0ZUNhbnZhcygpXG4gICAgdGhpcy5jcmVhdGVQcmVsb2FkZXIoKVxuICAgIHRoaXMuY3JlYXRlTmF2aWdhdGlvbigpXG5cbiAgICB0aGlzLmNyZWF0ZVBhZ2VzKClcblxuICAgIHRoaXMuYWRkTGlua0xpc3RlbmVycygpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMub25SZXNpemUoKVxuXG4gICAgdGhpcy51cGRhdGUoKTtcblxuICB9XG4gIC8vIOWIneWni+WMluexu1xuICBjcmVhdGVOYXZpZ2F0aW9uKCkge1xuICAgIHRoaXMubmF2aWdhdGlvbiA9IG5ldyBOYXZpZ2F0aW9uKHsgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGUgfSk7XG4gIH1cblxuICBjcmVhdGVQcmVsb2FkZXIoKSB7XG4gICAgdGhpcy5wcmVsb2FkZXIgPSBuZXcgUHJlbG9hZGVyKHtcbiAgICAgIGNhbnZhczogdGhpcy5jYW52YXNcbiAgICB9KVxuICAgIHRoaXMucHJlbG9hZGVyLm9uY2UoJ2NvbXBsZXRlZCcsIHRoaXMub25QcmVsb2FkZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGNyZWF0ZUNhbnZhcygpIHtcbiAgICB0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXMoe1xuICAgICAgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGVcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlQ29udGVudCgpIHtcbiAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpOyAvL0RFUzogc2VsZWN0aW5nIHRoZSBjb250ZW50IGNsYXNzXG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMuY29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKTsgLy9ERVM6IGdldHRpbmcgdGhlIGRhdGFzZXQtdGVtcGxhdGVcbiAgfVxuXG4gIGNyZWF0ZVBhZ2VzKCkge1xuICAgIC8vIOWIneWni+WMlumhtemdoizlhYjlu7rmlofmoaPvvIzlnKjlhpnov5nkuKrvvIzku5bkvJroh6rliqjlvLnlh7ppbXBvcnRcbiAgICB0aGlzLnBhZ2VzID0ge1xuICAgICAgYWJvdXQ6IG5ldyBBYm91dCgpLFxuICAgICAgY29sbGVjdGlvbnM6IG5ldyBDb2xsZWN0aW9ucygpLFxuICAgICAgZGV0YWlsOiBuZXcgRGV0YWlsKCksXG4gICAgICBob21lOiBuZXcgSG9tZSgpLFxuICAgIH1cbiAgICB0aGlzLnBhZ2UgPSB0aGlzLnBhZ2VzW3RoaXMudGVtcGxhdGVdXG4gICAgLy8g5L2g5Zyo5ZOq5Liq6aG16Z2i5bCx5riy5p+T5LqG5ZOq5Liq6aG16Z2i77yMZGF0YTB0ZW1wYWx0ZeWug+S9v+W+l+S9oOWPr+S7peWcqCBIVE1MIOWFg+e0oOS4reWtmOWCqOaVsOaNru+8jOeEtuWQjumAmui/hyBKYXZhU2NyaXB0IOadpeivu+WPluWSjOS9v+eUqOi/meS6m+aVsOaNru+8jFxuICAgIHRoaXMucGFnZS5jcmVhdGUoKVxuXG5cbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudHNcbiAgICovXG4gIG9uUHJlbG9hZGVkKCkge1xuICAgIHRoaXMub25SZXNpemUoKVxuXG4gICAgdGhpcy5jYW52YXMub25QcmVsb2FkZWQoKVxuICAgIHRoaXMucGFnZS5zaG93KClcbiAgICAvLyDplIDmr4Et6YeN5paw5a6a5LmJ5bC65a+4LemhtemdouWxleekulxuICB9XG5cbiAgb25Qb3BTdGF0ZSgpIHtcbiAgICB0aGlzLm9uQ2hhbmdlKHtcbiAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgcHVzaDogZmFsc2VcbiAgICB9KVxuICB9XG4gIC8vIOa1j+iniOWZqOi/lOWbnumUrui1t+S9nOeUqFxuXG4gIGFzeW5jIG9uQ2hhbmdlKHsgdXJsLCBwdXNoPXRydWUgfSkgey8vIOWQjOatpWh0bWzph4znmoR1cmzpk77mjqXvvIzkvb/lvpflnKhjaGVja+aXtuS4jeS8mueci+WIsOayoeacieabtOaWsOeahGNvbnRlbnTlkI3lrZdcbiAgICB0aGlzLmNhbnZhcy5vbkNoYW5nZVN0YXJ0KHRoaXMudGVtcGxhdGUsIHVybClcblxuICAgIGF3YWl0IHRoaXMucGFnZS5oaWRlKClcbiAgICAvLyDlvZPngrnlh7vml7bvvIzlvZPliY3pobXpnaLkvJrooqvpmpDol49cbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgd2luZG93LmZldGNoKHVybClcblxuICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVxdWVzdC50ZXh0KClcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICAgIGlmKHB1c2gpe1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpXG4gICAgICB9XG4gICAgIFxuICAgICAgLy8g5bCx5piv6K+05L2g54K55Ye75ZOq5Liq6aG16Z2iLHVybOeahOWQjue8gOWwseaYr+WTquS4qumhtemdoueahC9jb2xsZWN0aXNvbnMgb3IgL2Fib3V0IG9yIC9zbGFzaCBob21lXG5cblxuICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWxcblxuICAgICAgY29uc3QgZGl2Q29udGVudCA9IGRpdi5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpXG5cbiAgICAgIHRoaXMudGVtcGxhdGUgPSBkaXZDb250ZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10ZW1wbGF0ZScpXG5cblxuICAgICAgdGhpcy5uYXZpZ2F0aW9uLm9uQ2hhbmdlKHRoaXMudGVtcGxhdGUpXG5cbiAgICAgIHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnLCB0aGlzLnRlbXBsYXRlKVxuICAgICAgdGhpcy5jb250ZW50LmlubmVySFRNTCA9IGRpdkNvbnRlbnQuaW5uZXJIVE1MXG5cbiAgICAgIHRoaXMuY2FudmFzLm9uQ2hhbmdlRW5kKHRoaXMudGVtcGxhdGUpXG5cbiAgICAgIHRoaXMucGFnZSA9IHRoaXMucGFnZXNbdGhpcy50ZW1wbGF0ZV1cbiAgICAgIC8vIOi/meS4qnRlbXBsYXRl5piv5paw55qE6aG16Z2i55qEdGVtcGxhdGVcblxuICAgICAgdGhpcy5wYWdlLmNyZWF0ZSgpXG4gICAgICB0aGlzLm9uUmVzaXplKClcbiAgICAgIHRoaXMucGFnZS5zaG93KClcbiAgICAgIHRoaXMuYWRkTGlua0xpc3RlbmVycygpXG4gICAgICAvLyDov5nph4zlj4jlhpnkuIDpgY3mmK/lm6DkuLrlnKjliJvlu7rmlrDnmoTpobXpnaLkuYvlkI7vvIzmnInkupvpobXpnaLph4zpnaLov5jmnInmlrDnmoTpk77mjqXvvIzmiYDku6XlnKjmjonkuIDmrKHov5nkuKrmlrnms5VcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnRXJyb3InKVxuICAgIH1cblxuICAgIC8vIGlmIChyZXF1ZXN0LnN0YXR1cylcbiAgICBjb25zb2xlLmxvZyhyZXF1ZXN0KVxuICB9XG5cbiAgb25SZXNpemUoKSB7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShfID0+IHtcbiAgICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblJlc2l6ZSkge1xuICAgICAgICB0aGlzLmNhbnZhcy5vblJlc2l6ZSgpO1xuICAgICAgfVxuICAgICAgLy8g5aSE55CG56qX5Y+j6LCD5pW05aSn5bCP5LqL5Lu255qE5Ye95pWw44CC5b2T5rWP6KeI5Zmo56qX5Y+j5aSn5bCP5pS55Y+Y5pe277yI5q+U5aaC55So5oi36LCD5pW056qX5Y+j5aSn5bCP5oiW6ICF6K6+5aSH5Y+R55Sf5peL6L2s77yJ77yM5Lya6Kem5Y+RIG9uUmVzaXplIOWHveaVsOOAglxuICAgIH0pXG5cblxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLm9uUmVzaXplKSB7XG4gICAgICB0aGlzLnBhZ2Uub25SZXNpemUoKTtcbiAgICB9XG4gIH1cblxuICBvblRvdWNoRG93bihldmVudCkge1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoRG93bikge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaERvd24oZXZlbnQpO1xuICAgIH1cblxuXG4gIH1cblxuICBvblRvdWNoTW92ZShldmVudCkge1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoTW92ZSkge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaE1vdmUoZXZlbnQpO1xuICAgIH1cblxuICB9XG5cbiAgb25Ub3VjaFVwKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLm9uVG91Y2hVcCkge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaFVwKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBvbldoZWVsKGV2ZW50KSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFdoZWVsID0gTm9ybWFsaXplV2hlZWwoZXZlbnQpO1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vbldoZWVsKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vbldoZWVsKG5vcm1hbGl6ZWRXaGVlbCk7XG4gICAgICAvLyDosIPnlKjnlLvluIPnmoRvbldoZWVs55qE5pa55rOV77yM5bm25bCG5qCH5YeG5YyW5aSE55CG5ZCO55qE5rua5Yqo5YC85L2c5Li65Y+C5pWw5Lyg6L+b5Y67XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFnZSAmJiB0aGlzLnBhZ2Uub25XaGVlbCkge1xuICAgICAgdGhpcy5wYWdlLm9uV2hlZWwobm9ybWFsaXplZFdoZWVsKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBMb29wXG4gICAqL1xuXG4gIHVwZGF0ZSgpIHsgLy8g5Yqo55S75oiW6aG16Z2i5pu05paw55qE5b6q546vXG5cbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS51cGRhdGUpIHtcbiAgICAgIHRoaXMucGFnZS51cGRhdGUoKTtcbiAgICB9XG4gICAgLy8g5YWI5riy5p+T6aG16Z2i77yM5Zug5Li65pyJY29ycmVjdCBZIHBvc2l0aW9u77yM5omA5Lul5ZCO6Z2i55qEY2FudmFz55qEWeS5n+S8mui3n+edgOabtOaWsFxuXG4gICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLnVwZGF0ZSkge1xuICAgICAgdGhpcy5jYW52YXMudXBkYXRlKHRoaXMucGFnZS5zY3JvbGwpO1xuICAgIH1cblxuICAgIHRoaXMuZnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbmVyc1xuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5vblBvcFN0YXRlLmJpbmQodGhpcykpXG4gICAgLy8g5rWP6KeI5Zmo6L+U5Zue6ZSu6LW35L2c55SoXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCB0aGlzLm9uV2hlZWwuYmluZCh0aGlzKSlcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uVG91Y2hEb3duLmJpbmQodGhpcykpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Ub3VjaFVwLmJpbmQodGhpcykpXG4gICAgLy8g55S16ISR56uv55qEXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hEb3duLmJpbmQodGhpcykpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hVcC5iaW5kKHRoaXMpKVxuICAgIC8vIOenu+WKqOerr+eahFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYWRkTGlua0xpc3RlbmVycygpIHsvLyDpk77mjqXot7PovazlpITnkIZcblxuICAgIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYScpXG4gICAgLy8g6YCJ5oup5omA5pyJ6ZO+5o6l77yMbGlua3PmmK/mlbDnu4RcblxuICAgIGVhY2gobGlua3MsIChsaW5rKSA9PiB7XG4gICAgICBsaW5rLm9uY2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgIGNvbnN0IHsgaHJlZiB9ID0gbGlua1xuXG4gICAgICAgIHRoaXMub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5uZXcgQXBwKCkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIxNWQwZmJiMzcyZWEzYzdiY2I1ZlwiKSJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRoaXMiLCJjcmVhdGVDb250ZW50IiwiY3JlYXRlQ2FudmFzIiwiY3JlYXRlUHJlbG9hZGVyIiwiY3JlYXRlTmF2aWdhdGlvbiIsImNyZWF0ZVBhZ2VzIiwiYWRkTGlua0xpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXJzIiwib25SZXNpemUiLCJ1cGRhdGUiLCJuYXZpZ2F0aW9uIiwiTmF2aWdhdGlvbiIsInRlbXBsYXRlIiwicHJlbG9hZGVyIiwiUHJlbG9hZGVyIiwiY2FudmFzIiwib25jZSIsIm9uUHJlbG9hZGVkIiwiYmluZCIsIkNhbnZhcyIsImNvbnRlbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRBdHRyaWJ1dGUiLCJwYWdlcyIsImFib3V0IiwiQWJvdXQiLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb25zIiwiZGV0YWlsIiwiRGV0YWlsIiwiaG9tZSIsIkhvbWUiLCJwYWdlIiwiY3JlYXRlIiwic2hvdyIsIm9uUG9wU3RhdGUiLCJvbkNoYW5nZSIsInVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJwdXNoIiwib25DaGFuZ2VTdGFydCIsImhpZGUiLCJyZXF1ZXN0IiwiZmV0Y2giLCJzdGF0dXMiLCJodG1sIiwidGV4dCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiaW5uZXJIVE1MIiwiZGl2Q29udGVudCIsInNldEF0dHJpYnV0ZSIsIm9uQ2hhbmdlRW5kIiwiY29uc29sZSIsImxvZyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl8iLCJvblRvdWNoRG93biIsImV2ZW50Iiwib25Ub3VjaE1vdmUiLCJvblRvdWNoVXAiLCJvbldoZWVsIiwibm9ybWFsaXplZFdoZWVsIiwiTm9ybWFsaXplV2hlZWwiLCJzY3JvbGwiLCJmcmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJsaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlYWNoIiwibGluayIsIm9uY2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsImhyZWYiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=