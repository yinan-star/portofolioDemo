/*! For license information please see main.259053b175de22d8e3b2.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var i=s("./node_modules/gsap/index.js"),o=s("./node_modules/ogl/src/core/Renderer.js"),h=s("./node_modules/ogl/src/core/Camera.js"),n=s("./node_modules/ogl/src/core/Transform.js"),a=s("./app/components/Canvas/home/index.js"),c=s("./app/components/Canvas/about/index.js"),l=s("./app/components/Canvas/collections/index.js"),d=s("./app/components/Canvas/Detail/index.js"),r=s("./app/components/Canvas/Transition.js");class u{constructor({template:t}){this.template=t,this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},this.createRenderer(),this.createCamera(),this.createScene(),this.onResize()}createRenderer(){this.renderer=new o.Renderer({alpha:!0,antialias:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new h.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new n.Transform}createHome(){this.home=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null)}createAbout(){this.about=new c.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null)}createCollections(){this.collections=new l.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createDetail(){this.detail=new d.default({gl:this.gl,scene:this.scene,sizes:this.sizes,transition:this.transition})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onChangeEnd(this.template)}onChangeStart(t,e){this.about&&this.about.hide(),this.collections&&this.collections.hide(),this.home&&this.home.hide(),this.isFromCollectionsToDetail="collections"===this.template&&e.indexOf("detail")>-1,this.isFromDetailToCollections="detail"===this.template&&e.indexOf("collections")>-1,(this.isFromCollectionsToDetail||this.isFromDetailToCollections)&&(this.transition=new r.default({collections:this.collections,gl:this.gl,scene:this.scene,sizes:this.sizes,url:e}))}onChangeEnd(t){"about"===t?this.createAbout():this.about&&this.destroyAbout(),"collections"===t?(this.createCollections(),this.transition&&this.transition.animateCollections(this.collections)):this.collections&&this.destroyCollections(),"detail"===t?(this.createDetail(),i.default.delayedCall(.5,(t=>{this.transition&&this.transition.animateDetail(this.detail)}))):this.detail&&this.destroyDetail(),"home"===t?this.createHome():this.destroyHome(),this.template=t}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const t=this.camera.fov*(Math.PI/180),e=2*Math.tan(t/2)*this.camera.position.z,s=e*this.camera.aspect;this.sizes={height:e,width:s};const i={sizes:this.sizes};this.about&&this.about.onResize(i),this.collections&&this.collections.onResize(i),this.detail&&this.detail.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(t){this.isDown=!0,this.x.start=t.touches?t.touches[0].clientX:t.clientX,this.y.start=t.touches?t.touches[0].clientY:t.clientY;const e={x:this.x,y:this.y};this.about&&this.about.onTouchDown(e),this.collections&&this.collections.onTouchDown(e),this.detail&&this.detail.onTouchDown(e),this.home&&this.home.onTouchDown(e)}onTouchMove(t){if(!this.isDown)return;const e=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY;this.x.end=e,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchMove(i),this.collections&&this.collections.onTouchMove(i),this.detail&&this.detail.onTouchMove(i),this.home&&this.home.onTouchMove(i)}onTouchUp(t){this.isDown=!1;const e=t.changedTouches?t.changedTouches[0].clientX:t.clientX,s=t.changedTouches?t.changedTouches[0].clientY:t.clientY;this.x.end=e,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchUp(i),this.collections&&this.collections.onTouchUp(i),this.detail&&this.detail.onTouchUp(i),this.home&&this.home.onTouchUp(i)}onWheel(t){this.home&&this.home.onWheel(t),this.collections&&this.collections.onWheel(t)}update(t){this.about&&this.about.update(t),this.collections&&this.collections.update(),this.detail&&this.detail.update(),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}}},(function(t){t.h=()=>"091f51ba5d209f62595d"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQU1HLFFBQ25FdEUsRUFBSW1FLEVBQU1PLGVBQWlCUCxFQUFNTyxlQUFlLEdBQUdILFFBQVVKLEVBQU1JLFFBRXpFNUUsS0FBS0MsRUFBRUcsSUFBTUgsRUFDYkQsS0FBS0ssRUFBRUQsSUFBTUMsRUFFYixNQUFNaUUsRUFBUyxDQUNickUsRUFBR0QsS0FBS0MsRUFDUkksRUFBR0wsS0FBS0ssR0FHTkwsS0FBS2dDLE9BQ1BoQyxLQUFLZ0MsTUFBTThDLFVBQVVSLEdBR25CdEUsS0FBS29DLGFBQ1BwQyxLQUFLb0MsWUFBWTBDLFVBQVVSLEdBR3pCdEUsS0FBS3dDLFFBQ1B4QyxLQUFLd0MsT0FBT3NDLFVBQVVSLEdBR3BCdEUsS0FBSzBCLE1BQ1AxQixLQUFLMEIsS0FBS29ELFVBQVVSLEVBRXhCLENBRUFVLE9BQUFBLENBQVFSLEdBQ0Z4RSxLQUFLMEIsTUFDUDFCLEtBQUswQixLQUFLc0QsUUFBUVIsR0FHaEJ4RSxLQUFLb0MsYUFDUHBDLEtBQUtvQyxZQUFZNEMsUUFBUVIsRUFFN0IsQ0FHQVMsTUFBQUEsQ0FBT0MsR0FJRGxGLEtBQUtnQyxPQUNQaEMsS0FBS2dDLE1BQU1pRCxPQUFPQyxHQUloQmxGLEtBQUtvQyxhQUNQcEMsS0FBS29DLFlBQVk2QyxTQUdmakYsS0FBS3dDLFFBQ1B4QyxLQUFLd0MsT0FBT3lDLFNBR1ZqRixLQUFLMEIsTUFDUDFCLEtBQUswQixLQUFLdUQsU0FHWmpGLEtBQUtVLFNBQVN5RSxPQUFPLENBQ25CaEUsT0FBUW5CLEtBQUttQixPQUNiSSxNQUFPdkIsS0FBS3VCLE9BRWhCLGtCQ2xYRjZELEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbG9lbWEvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxvZW1hL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDov5nkuKrmlofku7bnmoTkuIrkuIDnuqfkuqTmjqXmmK9jb21wb25lbnRz55qEaW5kZXguanPmlofku7ZcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnO1xuaW1wb3J0IHsgQ2FtZXJhLCBSZW5kZXJlciwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJztcblxuaW1wb3J0IEhvbWUgZnJvbSAnLi9ob21lJztcbmltcG9ydCBBYm91dCBmcm9tICcuL2Fib3V0JztcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tICcuL2NvbGxlY3Rpb25zJ1xuaW1wb3J0IERldGFpbCBmcm9tICcuL0RldGFpbCc7XG5cbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJy4vVHJhbnNpdGlvbidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcbiAgY29uc3RydWN0b3IoeyB0ZW1wbGF0ZSB9KSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlXG4gICAgLy8gdGVtcGxhdGXmmK/mlbDmja7mqKHniYhcbiAgICB0aGlzLnggPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwXG4gICAgfVxuICAgIHRoaXMueSA9IHtcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICBlbmQ6IDBcbiAgICB9XG5cblxuICAgIHRoaXMuY3JlYXRlUmVuZGVyZXIoKVxuICAgIHRoaXMuY3JlYXRlQ2FtZXJhKClcbiAgICB0aGlzLmNyZWF0ZVNjZW5lKClcblxuICAgIHRoaXMub25SZXNpemUoKVxuXG4gICAgLy8gdGhpcy5jcmVhdGVDdWJlKClcbiAgICAvLyDku4DkuYjku4DkuYjlv5jorrBkZWZpbmXkuobvvIzlsLHnnIvov5nph4zmnInmsqHmnInooqvliJ3lp4vljJZcbiAgfVxuXG4gIGNyZWF0ZVJlbmRlcmVyKCkge1xuICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoe1xuICAgICAgYWxwaGE6IHRydWUsXG4gICAgICAvLyDorql3ZWJnbOeahOiDjOaZr+iJsumAj+aYju+8jOS7juiAjOaYvuekumNzc+iuvue9rueahOminOiJslxuICAgICAgYW50aWFsaWFzOiB0cnVlXG4gICAgICAvLyDmipfplK/pvb9cbiAgICB9KTtcblxuICAgIHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsOyAvL1RJUCB3b3JrcyBsaWtlIGEgY2FudmFzIGNvbnRleHRcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5nbC5jYW52YXMpO1xuICB9XG5cbiAgY3JlYXRlQ2FtZXJhKCkge1xuICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYSh0aGlzLmdsKVxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1XG5cbiAgfVxuXG4gIGNyZWF0ZVNjZW5lKCkge1xuICAgIHRoaXMuc2NlbmUgPSBuZXcgVHJhbnNmb3JtKClcbiAgfVxuXG4gIC8qKlxuICAgKiBIb21lLlxuICAgKi9cbiAgY3JlYXRlSG9tZSgpIHtcbiAgICB0aGlzLmhvbWUgPSBuZXcgSG9tZSh7XG4gICAgICBnbDogdGhpcy5nbCxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICB9KTtcblxuICB9XG5cbiAgZGVzdHJveUhvbWUoKSB7XG4gICAgaWYgKCF0aGlzLmhvbWUpIHJldHVyblxuICAgIC8vIOWmguaenOS4jeWtmOWcqGhvbWXvvIzlsLHplIDmr4Fob21l77yM77yB5piv5LiN5oiQ56uL55qE5oSP5oCd77yM5p2h5Lu25Li65YGHXG4gICAgdGhpcy5ob21lLmRlc3Ryb3koKVxuICAgIHRoaXMuaG9tZSA9IG51bGxcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEFib3V0LlxuICAgKi9cbiAgY3JlYXRlQWJvdXQoKSB7XG4gICAgdGhpcy5hYm91dCA9IG5ldyBBYm91dCh7XG4gICAgICBnbDogdGhpcy5nbCxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lBYm91dCgpIHtcbiAgICBpZiAoIXRoaXMuYWJvdXQpIHJldHVyblxuICAgIC8vIOWmguaenOS4jeWtmOWcqGFib3V077yM5bCx6ZSA5q+BYWJvdXTvvIzvvIHmmK/kuI3miJDnq4vnmoTmhI/mgJ3vvIzmnaHku7bkuLrlgYdcbiAgICB0aGlzLmFib3V0LmRlc3Ryb3koKVxuICAgIHRoaXMuYWJvdXQgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdGlvbnMuXG4gICAqL1xuICBjcmVhdGVDb2xsZWN0aW9ucygpIHtcbiAgICB0aGlzLmNvbGxlY3Rpb25zID0gbmV3IENvbGxlY3Rpb25zKHtcbiAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBzaXplczogdGhpcy5zaXplc1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveUNvbGxlY3Rpb25zKCkge1xuICAgIGlmICghdGhpcy5jb2xsZWN0aW9ucykgcmV0dXJuXG4gICAgLy8g5aaC5p6c5LiN5a2Y5ZyoQ29sbGVjdGlvbnPvvIzlsLHplIDmr4FDb2xsZWN0aW9uc++8jO+8geaYr+S4jeaIkOeri+eahOaEj+aAne+8jOadoeS7tuS4uuWBh1xuICAgIHRoaXMuY29sbGVjdGlvbnMuZGVzdHJveSgpXG4gICAgdGhpcy5jb2xsZWN0aW9ucyA9IG51bGxcbiAgfVxuXG5cbiAgLyoqXG4gICAqIERldGFpbC5cbiAgICovXG4gIGNyZWF0ZURldGFpbCgpIHtcbiAgICB0aGlzLmRldGFpbCA9IG5ldyBEZXRhaWwoe1xuICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzLFxuICAgICAgdHJhbnNpdGlvbjogdGhpcy50cmFuc2l0aW9uXG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95RGV0YWlsKCkge1xuICAgIGlmICghdGhpcy5kZXRhaWwpIHJldHVyblxuICAgIC8vIOWmguaenOS4jeWtmOWcqGRldGFpbO+8jOWwsemUgOavgWRldGFpbO+8jO+8geaYr+S4jeaIkOeri+eahOaEj+aAne+8jOadoeS7tuS4uuWBh1xuICAgIHRoaXMuZGV0YWlsLmRlc3Ryb3koKVxuICAgIHRoaXMuZGV0YWlsID0gbnVsbFxuICB9XG5cblxuICAvKipcbiAgICogRVZFTlRTXG4gICAqL1xuICBvblByZWxvYWRlZCgpIHtcbiAgICB0aGlzLm9uQ2hhbmdlRW5kKHRoaXMudGVtcGxhdGUpXG4gIH1cblxuICBvbkNoYW5nZVN0YXJ0KHRlbXBsYXRlLCB1cmwpIHtcbiAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgdGhpcy5hYm91dC5oaWRlKClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5oaWRlKClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUuaGlkZSgpXG4gICAgfVxuXG4gICAgdGhpcy5pc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsID0gdGhpcy50ZW1wbGF0ZSA9PT0gJ2NvbGxlY3Rpb25zJyAmJiB1cmwuaW5kZXhPZignZGV0YWlsJykgPiAtMTsgLy8gcHJldHRpZXItaWdub3JlXG4gICAgdGhpcy5pc0Zyb21EZXRhaWxUb0NvbGxlY3Rpb25zID0gdGhpcy50ZW1wbGF0ZSA9PT0gJ2RldGFpbCcgJiYgdXJsLmluZGV4T2YoJ2NvbGxlY3Rpb25zJykgPiAtMTsgLy8gcHJldHRpZXItaWdub3JlXG5cbiAgICAvLyDlpoLmnpzmmK9kZXRhaWzlubbkuJQsY29sbGVjdGlvbnMgYXJlIHRoZSBwYXJ0IG9mIHRoZSB1cmzku5bnmoTlgLzlsLHmmK8+LTHnmoRcblxuICAgIGlmICh0aGlzLmlzRnJvbUNvbGxlY3Rpb25zVG9EZXRhaWwgfHwgdGhpcy5pc0Zyb21EZXRhaWxUb0NvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLnRyYW5zaXRpb24gPSBuZXcgVHJhbnNpdGlvbih7XG4gICAgICAgIGNvbGxlY3Rpb25zOiB0aGlzLmNvbGxlY3Rpb25zLFxuICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICAgIHNpemVzOiB0aGlzLnNpemVzLFxuICAgICAgICB1cmwsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgb25DaGFuZ2VFbmQodGVtcGxhdGUpIHtcbiAgICAvLyDlsLHmmK/lvZPnlKjmiLdjaGFuZ2UgdGhlIHJvdXRlXG4gICAgaWYgKHRlbXBsYXRlID09PSAnYWJvdXQnKSB7XG4gICAgICB0aGlzLmNyZWF0ZUFib3V0KClcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuZGVzdHJveUFib3V0KClcbiAgICB9XG5cbiAgICBpZiAodGVtcGxhdGUgPT09ICdjb2xsZWN0aW9ucycpIHtcbiAgICAgIHRoaXMuY3JlYXRlQ29sbGVjdGlvbnMoKVxuICAgICAgaWYodGhpcy50cmFuc2l0aW9uKXtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uLmFuaW1hdGVDb2xsZWN0aW9ucyh0aGlzLmNvbGxlY3Rpb25zKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5kZXN0cm95Q29sbGVjdGlvbnMoKVxuICAgIH1cblxuICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2RldGFpbCcpIHtcbiAgICAgIHRoaXMuY3JlYXRlRGV0YWlsKClcblxuICAgICAgR1NBUC5kZWxheWVkQ2FsbCgwLjUsIF8gPT4ge1xuICAgICAgICBpZih0aGlzLnRyYW5zaXRpb24pe1xuICAgICAgICAgIHRoaXMudHJhbnNpdGlvbi5hbmltYXRlRGV0YWlsKHRoaXMuZGV0YWlsKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAodGhpcy5kZXRhaWwpIHtcbiAgICAgIHRoaXMuZGVzdHJveURldGFpbCgpXG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlID09PSAnaG9tZScpIHtcbiAgICAgIHRoaXMuY3JlYXRlSG9tZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdHJveUhvbWUoKVxuICAgIH1cblxuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZVxuXG4gIH1cblxuICBvblJlc2l6ZSgpIHtcbiAgICAvLyDlsIbmuLLmn5PnmoTnlLvluIPlsLrlr7jloavmu6Hop4bnqpflj6NcbiAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgLy8g5Yib5bu65LqGY2FtZXJh5LmL5ZCO5omN6IO95Yib5bu66YCP6KeG5Zu+XG4gICAgdGhpcy5jYW1lcmEucGVyc3BlY3RpdmUoeyBhc3BlY3Q6IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0IH0pO1xuXG4gICAgY29uc3QgZm92ID0gdGhpcy5jYW1lcmEuZm92ICogKE1hdGguUEkgLyAxODApO1xuICAgIGNvbnN0IGhlaWdodCA9IDIgKiBNYXRoLnRhbihmb3YgLyAyKSAqIHRoaXMuY2FtZXJhLnBvc2l0aW9uLno7XG4gICAgY29uc3Qgd2lkdGggPSBoZWlnaHQgKiB0aGlzLmNhbWVyYS5hc3BlY3Q7XG5cbiAgICB0aGlzLnNpemVzID0ge1xuICAgICAgaGVpZ2h0LFxuICAgICAgd2lkdGgsXG4gICAgfTtcblxuICAgIGNvbnN0IHZhbHVlcyA9IHsgc2l6ZXM6IHRoaXMuc2l6ZXMgfVxuXG4gICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25SZXNpemUodmFsdWVzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblJlc2l6ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgdGhpcy5kZXRhaWwub25SZXNpemUodmFsdWVzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25SZXNpemUodmFsdWVzKTtcbiAgICB9XG4gIH1cblxuICBvblRvdWNoRG93bihldmVudCkge1xuICAgIHRoaXMuaXNEb3duID0gdHJ1ZVxuICAgIHRoaXMueC5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgdGhpcy55LnN0YXJ0ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvblRvdWNoTW92ZShldmVudCkge1xuICAgIGlmICghdGhpcy5pc0Rvd24pIHJldHVyblxuXG4gICAgY29uc3QgeCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgY29uc3QgeSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICB0aGlzLnguZW5kID0geFxuICAgIHRoaXMueS5lbmQgPSB5XG5cblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvblRvdWNoVXAoZXZlbnQpIHtcbiAgICB0aGlzLmlzRG93biA9IGZhbHNlXG4gICAgY29uc3QgeCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzID8gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCA6IGV2ZW50LmNsaWVudFhcbiAgICBjb25zdCB5ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMgPyBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgdGhpcy54LmVuZCA9IHhcbiAgICB0aGlzLnkuZW5kID0geVxuXG4gICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgeDogdGhpcy54LFxuICAgICAgeTogdGhpcy55XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoVXAodmFsdWVzKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgdGhpcy5kZXRhaWwub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvbldoZWVsKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uV2hlZWwoZXZlbnQpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25XaGVlbChldmVudClcbiAgICB9XG4gIH1cblxuICAvLyBMb29wXG4gIHVwZGF0ZShzY3JvbGwpIHtcbiAgICAvLyDlrp7ml7bmuLLmn5NcbiAgICAvLyB0aGlzLm1lc2gucm90YXRpb24ueCArPSAwLjAxXG4gICAgLy8gdGhpcy5tZXNoLnJvdGF0aW9uLnkgKz0gMC4wMVxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0LnVwZGF0ZShzY3JvbGwpXG4gICAgfVxuICAgIC8vIOWboOS4uuWPquaciWFib3V0IHBhZ2XmnInkuIvmu5FcblxuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLnVwZGF0ZSgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC51cGRhdGUoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS51cGRhdGUoKVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHtcbiAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZVxuICAgIH0pXG4gIH1cbn0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIwOTFmNTFiYTVkMjA5ZjYyNTk1ZFwiKSJdLCJuYW1lcyI6WyJDYW52YXMiLCJjb25zdHJ1Y3RvciIsInRlbXBsYXRlIiwidGhpcyIsIngiLCJzdGFydCIsImRpc3RhbmNlIiwiZW5kIiwieSIsImNyZWF0ZVJlbmRlcmVyIiwiY3JlYXRlQ2FtZXJhIiwiY3JlYXRlU2NlbmUiLCJvblJlc2l6ZSIsInJlbmRlcmVyIiwiUmVuZGVyZXIiLCJhbHBoYSIsImFudGlhbGlhcyIsImdsIiwiZG9jdW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjYW52YXMiLCJjYW1lcmEiLCJDYW1lcmEiLCJwb3NpdGlvbiIsInoiLCJzY2VuZSIsIlRyYW5zZm9ybSIsImNyZWF0ZUhvbWUiLCJob21lIiwiSG9tZSIsInNpemVzIiwiZGVzdHJveUhvbWUiLCJkZXN0cm95IiwiY3JlYXRlQWJvdXQiLCJhYm91dCIsIkFib3V0IiwiZGVzdHJveUFib3V0IiwiY3JlYXRlQ29sbGVjdGlvbnMiLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb25zIiwiZGVzdHJveUNvbGxlY3Rpb25zIiwiY3JlYXRlRGV0YWlsIiwiZGV0YWlsIiwiRGV0YWlsIiwidHJhbnNpdGlvbiIsImRlc3Ryb3lEZXRhaWwiLCJvblByZWxvYWRlZCIsIm9uQ2hhbmdlRW5kIiwib25DaGFuZ2VTdGFydCIsInVybCIsImhpZGUiLCJpc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsIiwiaW5kZXhPZiIsImlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMiLCJUcmFuc2l0aW9uIiwiYW5pbWF0ZUNvbGxlY3Rpb25zIiwiR1NBUCIsImRlbGF5ZWRDYWxsIiwiXyIsImFuaW1hdGVEZXRhaWwiLCJzZXRTaXplIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwicGVyc3BlY3RpdmUiLCJhc3BlY3QiLCJmb3YiLCJNYXRoIiwiUEkiLCJoZWlnaHQiLCJ0YW4iLCJ3aWR0aCIsInZhbHVlcyIsIm9uVG91Y2hEb3duIiwiZXZlbnQiLCJpc0Rvd24iLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hVcCIsImNoYW5nZWRUb3VjaGVzIiwib25XaGVlbCIsInVwZGF0ZSIsInNjcm9sbCIsInJlbmRlciIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==