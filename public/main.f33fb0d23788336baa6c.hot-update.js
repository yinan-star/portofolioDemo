/*! For license information please see main.f33fb0d23788336baa6c.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var i=s("./node_modules/ogl/src/core/Renderer.js"),o=s("./node_modules/ogl/src/core/Camera.js"),h=s("./node_modules/ogl/src/core/Transform.js"),n=s("./app/components/Canvas/home/index.js"),c=s("./app/components/Canvas/about/index.js"),a=s("./app/components/Canvas/collections/index.js"),l=s("./app/components/Canvas/Detail/index.js"),r=s("./app/components/Canvas/Transition.js");class d{constructor({template:t}){this.template=t,this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},this.createRenderer(),this.createCamera(),this.createScene(),this.onResize()}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antialias:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new o.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new h.Transform}createHome(){this.home=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null)}createAbout(){this.about=new c.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null)}createCollections(){this.collections=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createDetail(){this.detail=new l.default({gl:this.gl,scene:this.scene,sizes:this.sizes,transition:this.transition})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onChangeEnd(this.template)}onChangeStart(t,e){this.about&&this.about.hide(),this.collections&&this.collections.hide(),this.home&&this.home.hide(),this.isFromCollectionsToDetail="collections"===this.template&&e.indexOf("detail")>-1,this.isFromDetailToCollections="detail"===this.template&&e.indexOf("collections")>-1,(this.isFromCollectionsToDetail||this.isFromDetailToCollections)&&(this.transition=new r.default({gl:this.gl,scene:this.scene,sizes:this.sizes,url:e}),this.transition.setElement(this.collections||this.detail))}onChangeEnd(t){"about"===t?this.createAbout():this.about&&this.destroyAbout(),"collections"===t?this.createCollections():this.collections&&this.destroyCollections(),"detail"===t?this.createDetail():this.detail&&this.destroyDetail(),"home"===t?this.createHome():this.destroyHome(),this.template=t}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const t=this.camera.fov*(Math.PI/180),e=2*Math.tan(t/2)*this.camera.position.z,s=e*this.camera.aspect;this.sizes={height:e,width:s};const i={sizes:this.sizes};this.about&&this.about.onResize(i),this.collections&&this.collections.onResize(i),this.detail&&this.detail.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(t){this.isDown=!0,this.x.start=t.touches?t.touches[0].clientX:t.clientX,this.y.start=t.touches?t.touches[0].clientY:t.clientY;const e={x:this.x,y:this.y};this.about&&this.about.onTouchDown(e),this.collections&&this.collections.onTouchDown(e),this.detail&&this.detail.onTouchDown(e),this.home&&this.home.onTouchDown(e)}onTouchMove(t){if(!this.isDown)return;const e=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY;this.x.end=e,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchMove(i),this.collections&&this.collections.onTouchMove(i),this.detail&&this.detail.onTouchMove(i),this.home&&this.home.onTouchMove(i)}onTouchUp(t){this.isDown=!1;const e=t.changedTouches?t.changedTouches[0].clientX:t.clientX,s=t.changedTouches?t.changedTouches[0].clientY:t.clientY;this.x.end=e,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchUp(i),this.collections&&this.collections.onTouchUp(i),this.detail&&this.detail.onTouchUp(i),this.home&&this.home.onTouchUp(i)}onWheel(t){this.home&&this.home.onWheel(t),this.collections&&this.collections.onWheel(t)}update(t){this.about&&this.about.update(t),this.collections&&this.collections.update(),this.detail&&this.detail.update(),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}}},(function(t){t.h=()=>"90ae21982b4ac93f4afe"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5mMzNmYjBkMjM3ODgzMzZiYWE2Yy5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7dWZBV2UsTUFBTUEsRUFDbkJDLFdBQUFBLEVBQVksU0FBRUMsSUFDWkMsS0FBS0QsU0FBV0EsRUFFaEJDLEtBQUtDLEVBQUksQ0FDUEMsTUFBTyxFQUNQQyxTQUFVLEVBQ1ZDLElBQUssR0FFUEosS0FBS0ssRUFBSSxDQUNQSCxNQUFPLEVBQ1BDLFNBQVUsRUFDVkMsSUFBSyxHQUlQSixLQUFLTSxpQkFDTE4sS0FBS08sZUFDTFAsS0FBS1EsY0FFTFIsS0FBS1MsVUFJUCxDQUVBSCxjQUFBQSxHQUNFTixLQUFLVSxTQUFXLElBQUlDLEVBQUFBLFNBQVMsQ0FDM0JDLE9BQU8sRUFFUEMsV0FBVyxJQUliYixLQUFLYyxHQUFLZCxLQUFLVSxTQUFTSSxHQUV4QkMsU0FBU0MsS0FBS0MsWUFBWWpCLEtBQUtjLEdBQUdJLE9BQ3BDLENBRUFYLFlBQUFBLEdBQ0VQLEtBQUttQixPQUFTLElBQUlDLEVBQUFBLE9BQU9wQixLQUFLYyxJQUM5QmQsS0FBS21CLE9BQU9FLFNBQVNDLEVBQUksQ0FFM0IsQ0FFQWQsV0FBQUEsR0FDRVIsS0FBS3VCLE1BQVEsSUFBSUMsRUFBQUEsU0FDbkIsQ0FLQUMsVUFBQUEsR0FDRXpCLEtBQUswQixLQUFPLElBQUlDLEVBQUFBLFFBQUssQ0FDbkJiLEdBQUlkLEtBQUtjLEdBQ1RTLE1BQU92QixLQUFLdUIsTUFDWkssTUFBTzVCLEtBQUs0QixPQUdoQixDQUVBQyxXQUFBQSxHQUNPN0IsS0FBSzBCLE9BRVYxQixLQUFLMEIsS0FBS0ksVUFDVjlCLEtBQUswQixLQUFPLEtBQ2QsQ0FNQUssV0FBQUEsR0FDRS9CLEtBQUtnQyxNQUFRLElBQUlDLEVBQUFBLFFBQU0sQ0FDckJuQixHQUFJZCxLQUFLYyxHQUNUUyxNQUFPdkIsS0FBS3VCLE1BQ1pLLE1BQU81QixLQUFLNEIsT0FFaEIsQ0FFQU0sWUFBQUEsR0FDT2xDLEtBQUtnQyxRQUVWaEMsS0FBS2dDLE1BQU1GLFVBQ1g5QixLQUFLZ0MsTUFBUSxLQUNmLENBS0FHLGlCQUFBQSxHQUNFbkMsS0FBS29DLFlBQWMsSUFBSUMsRUFBQUEsUUFBWSxDQUNqQ3ZCLEdBQUlkLEtBQUtjLEdBQ1RTLE1BQU92QixLQUFLdUIsTUFDWkssTUFBTzVCLEtBQUs0QixPQUVoQixDQUVBVSxrQkFBQUEsR0FDT3RDLEtBQUtvQyxjQUVWcEMsS0FBS29DLFlBQVlOLFVBQ2pCOUIsS0FBS29DLFlBQWMsS0FDckIsQ0FNQUcsWUFBQUEsR0FDRXZDLEtBQUt3QyxPQUFTLElBQUlDLEVBQUFBLFFBQU8sQ0FDdkIzQixHQUFJZCxLQUFLYyxHQUNUUyxNQUFPdkIsS0FBS3VCLE1BQ1pLLE1BQU81QixLQUFLNEIsTUFDWmMsV0FBWTFDLEtBQUswQyxZQUVyQixDQUVBQyxhQUFBQSxHQUNPM0MsS0FBS3dDLFNBRVZ4QyxLQUFLd0MsT0FBT1YsVUFDWjlCLEtBQUt3QyxPQUFTLEtBQ2hCLENBTUFJLFdBQUFBLEdBQ0U1QyxLQUFLNkMsWUFBWTdDLEtBQUtELFNBQ3hCLENBRUErQyxhQUFBQSxDQUFjL0MsRUFBVWdELEdBQ2xCL0MsS0FBS2dDLE9BQ1BoQyxLQUFLZ0MsTUFBTWdCLE9BR1RoRCxLQUFLb0MsYUFDUHBDLEtBQUtvQyxZQUFZWSxPQUdmaEQsS0FBSzBCLE1BQ1AxQixLQUFLMEIsS0FBS3NCLE9BR1poRCxLQUFLaUQsMEJBQThDLGdCQUFsQmpELEtBQUtELFVBQThCZ0QsRUFBSUcsUUFBUSxXQUFhLEVBQzdGbEQsS0FBS21ELDBCQUE4QyxXQUFsQm5ELEtBQUtELFVBQXlCZ0QsRUFBSUcsUUFBUSxnQkFBa0IsR0FJekZsRCxLQUFLaUQsMkJBQTZCakQsS0FBS21ELDZCQUN6Q25ELEtBQUswQyxXQUFhLElBQUlVLEVBQUFBLFFBQVcsQ0FDL0J0QyxHQUFJZCxLQUFLYyxHQUNUUyxNQUFPdkIsS0FBS3VCLE1BQ1pLLE1BQU81QixLQUFLNEIsTUFDWm1CLFFBRUYvQyxLQUFLMEMsV0FBV1csV0FBV3JELEtBQUtvQyxhQUFlcEMsS0FBS3dDLFFBRXhELENBQ0FLLFdBQUFBLENBQVk5QyxHQUVPLFVBQWJBLEVBQ0ZDLEtBQUsrQixjQUNJL0IsS0FBS2dDLE9BQ2RoQyxLQUFLa0MsZUFHVSxnQkFBYm5DLEVBQ0ZDLEtBQUttQyxvQkFDSW5DLEtBQUtvQyxhQUNkcEMsS0FBS3NDLHFCQUdVLFdBQWJ2QyxFQUNGQyxLQUFLdUMsZUFPSXZDLEtBQUt3QyxRQUNkeEMsS0FBSzJDLGdCQUdVLFNBQWI1QyxFQUNGQyxLQUFLeUIsYUFFTHpCLEtBQUs2QixjQUdQN0IsS0FBS0QsU0FBV0EsQ0FFbEIsQ0FFQVUsUUFBQUEsR0FFRVQsS0FBS1UsU0FBUzRDLFFBQVFDLE9BQU9DLFdBQVlELE9BQU9FLGFBRWhEekQsS0FBS21CLE9BQU91QyxZQUFZLENBQUVDLE9BQVFKLE9BQU9DLFdBQWFELE9BQU9FLGNBRTdELE1BQU1HLEVBQU01RCxLQUFLbUIsT0FBT3lDLEtBQU9DLEtBQUtDLEdBQUssS0FDbkNDLEVBQVMsRUFBSUYsS0FBS0csSUFBSUosRUFBTSxHQUFLNUQsS0FBS21CLE9BQU9FLFNBQVNDLEVBQ3REMkMsRUFBUUYsRUFBUy9ELEtBQUttQixPQUFPd0MsT0FFbkMzRCxLQUFLNEIsTUFBUSxDQUNYbUMsU0FDQUUsU0FHRixNQUFNQyxFQUFTLENBQUV0QyxNQUFPNUIsS0FBSzRCLE9BRXpCNUIsS0FBS2dDLE9BQ1BoQyxLQUFLZ0MsTUFBTXZCLFNBQVN5RCxHQUdsQmxFLEtBQUtvQyxhQUNQcEMsS0FBS29DLFlBQVkzQixTQUFTeUQsR0FHeEJsRSxLQUFLd0MsUUFDUHhDLEtBQUt3QyxPQUFPL0IsU0FBU3lELEdBR25CbEUsS0FBSzBCLE1BQ1AxQixLQUFLMEIsS0FBS2pCLFNBQVN5RCxFQUV2QixDQUVBQyxXQUFBQSxDQUFZQyxHQUNWcEUsS0FBS3FFLFFBQVMsRUFDZHJFLEtBQUtDLEVBQUVDLE1BQVFrRSxFQUFNRSxRQUFVRixFQUFNRSxRQUFRLEdBQUdDLFFBQVVILEVBQU1HLFFBQ2hFdkUsS0FBS0ssRUFBRUgsTUFBUWtFLEVBQU1FLFFBQVVGLEVBQU1FLFFBQVEsR0FBR0UsUUFBVUosRUFBTUksUUFFaEUsTUFBTU4sRUFBUyxDQUNiakUsRUFBR0QsS0FBS0MsRUFDUkksRUFBR0wsS0FBS0ssR0FHTkwsS0FBS2dDLE9BQ1BoQyxLQUFLZ0MsTUFBTW1DLFlBQVlELEdBR3JCbEUsS0FBS29DLGFBQ1BwQyxLQUFLb0MsWUFBWStCLFlBQVlELEdBRzNCbEUsS0FBS3dDLFFBQ1B4QyxLQUFLd0MsT0FBTzJCLFlBQVlELEdBR3RCbEUsS0FBSzBCLE1BQ1AxQixLQUFLMEIsS0FBS3lDLFlBQVlELEVBRTFCLENBRUFPLFdBQUFBLENBQVlMLEdBQ1YsSUFBS3BFLEtBQUtxRSxPQUFRLE9BRWxCLE1BQU1wRSxFQUFJbUUsRUFBTUUsUUFBVUYsRUFBTUUsUUFBUSxHQUFHQyxRQUFVSCxFQUFNRyxRQUNyRGxFLEVBQUkrRCxFQUFNRSxRQUFVRixFQUFNRSxRQUFRLEdBQUdFLFFBQVVKLEVBQU1JLFFBRTNEeEUsS0FBS0MsRUFBRUcsSUFBTUgsRUFDYkQsS0FBS0ssRUFBRUQsSUFBTUMsRUFHYixNQUFNNkQsRUFBUyxDQUNiakUsRUFBR0QsS0FBS0MsRUFDUkksRUFBR0wsS0FBS0ssR0FHTkwsS0FBS2dDLE9BQ1BoQyxLQUFLZ0MsTUFBTXlDLFlBQVlQLEdBR3JCbEUsS0FBS29DLGFBQ1BwQyxLQUFLb0MsWUFBWXFDLFlBQVlQLEdBRzNCbEUsS0FBS3dDLFFBQ1B4QyxLQUFLd0MsT0FBT2lDLFlBQVlQLEdBR3RCbEUsS0FBSzBCLE1BQ1AxQixLQUFLMEIsS0FBSytDLFlBQVlQLEVBRTFCLENBRUFRLFNBQUFBLENBQVVOLEdBQ1JwRSxLQUFLcUUsUUFBUyxFQUNkLE1BQU1wRSxFQUFJbUUsRUFBTU8sZUFBaUJQLEVBQU1PLGVBQWUsR0FBR0osUUFBVUgsRUFBTUcsUUFDbkVsRSxFQUFJK0QsRUFBTU8sZUFBaUJQLEVBQU1PLGVBQWUsR0FBR0gsUUFBVUosRUFBTUksUUFFekV4RSxLQUFLQyxFQUFFRyxJQUFNSCxFQUNiRCxLQUFLSyxFQUFFRCxJQUFNQyxFQUViLE1BQU02RCxFQUFTLENBQ2JqRSxFQUFHRCxLQUFLQyxFQUNSSSxFQUFHTCxLQUFLSyxHQUdOTCxLQUFLZ0MsT0FDUGhDLEtBQUtnQyxNQUFNMEMsVUFBVVIsR0FHbkJsRSxLQUFLb0MsYUFDUHBDLEtBQUtvQyxZQUFZc0MsVUFBVVIsR0FHekJsRSxLQUFLd0MsUUFDUHhDLEtBQUt3QyxPQUFPa0MsVUFBVVIsR0FHcEJsRSxLQUFLMEIsTUFDUDFCLEtBQUswQixLQUFLZ0QsVUFBVVIsRUFFeEIsQ0FFQVUsT0FBQUEsQ0FBUVIsR0FDRnBFLEtBQUswQixNQUNQMUIsS0FBSzBCLEtBQUtrRCxRQUFRUixHQUdoQnBFLEtBQUtvQyxhQUNQcEMsS0FBS29DLFlBQVl3QyxRQUFRUixFQUU3QixDQUdBUyxNQUFBQSxDQUFPQyxHQUlEOUUsS0FBS2dDLE9BQ1BoQyxLQUFLZ0MsTUFBTTZDLE9BQU9DLEdBSWhCOUUsS0FBS29DLGFBQ1BwQyxLQUFLb0MsWUFBWXlDLFNBR2Y3RSxLQUFLd0MsUUFDUHhDLEtBQUt3QyxPQUFPcUMsU0FHVjdFLEtBQUswQixNQUNQMUIsS0FBSzBCLEtBQUttRCxTQUdaN0UsS0FBS1UsU0FBU3FFLE9BQU8sQ0FDbkI1RCxPQUFRbkIsS0FBS21CLE9BQ2JJLE1BQU92QixLQUFLdUIsT0FFaEIsa0JDL1dGeUQsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIOi/meS4quaWh+S7tueahOS4iuS4gOe6p+S6pOaOpeaYr2NvbXBvbmVudHPnmoRpbmRleC5qc+aWh+S7tlxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCc7XG5pbXBvcnQgeyBDYW1lcmEsIFJlbmRlcmVyLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnO1xuXG5pbXBvcnQgSG9tZSBmcm9tICcuL2hvbWUnO1xuaW1wb3J0IEFib3V0IGZyb20gJy4vYWJvdXQnO1xuaW1wb3J0IENvbGxlY3Rpb25zIGZyb20gJy4vY29sbGVjdGlvbnMnXG5pbXBvcnQgRGV0YWlsIGZyb20gJy4vRGV0YWlsJztcblxuaW1wb3J0IFRyYW5zaXRpb24gZnJvbSAnLi9UcmFuc2l0aW9uJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXMge1xuICBjb25zdHJ1Y3Rvcih7IHRlbXBsYXRlIH0pIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGVcbiAgICAvLyB0ZW1wbGF0ZeaYr+aVsOaNruaooeeJiFxuICAgIHRoaXMueCA9IHtcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICBlbmQ6IDBcbiAgICB9XG4gICAgdGhpcy55ID0ge1xuICAgICAgc3RhcnQ6IDAsXG4gICAgICBkaXN0YW5jZTogMCxcbiAgICAgIGVuZDogMFxuICAgIH1cblxuXG4gICAgdGhpcy5jcmVhdGVSZW5kZXJlcigpXG4gICAgdGhpcy5jcmVhdGVDYW1lcmEoKVxuICAgIHRoaXMuY3JlYXRlU2NlbmUoKVxuXG4gICAgdGhpcy5vblJlc2l6ZSgpXG5cbiAgICAvLyB0aGlzLmNyZWF0ZUN1YmUoKVxuICAgIC8vIOS7gOS5iOS7gOS5iOW/mOiusGRlZmluZeS6hu+8jOWwseeci+i/memHjOacieayoeacieiiq+WIneWni+WMllxuICB9XG5cbiAgY3JlYXRlUmVuZGVyZXIoKSB7XG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih7XG4gICAgICBhbHBoYTogdHJ1ZSxcbiAgICAgIC8vIOiuqXdlYmds55qE6IOM5pmv6Imy6YCP5piO77yM5LuO6ICM5pi+56S6Y3Nz6K6+572u55qE6aKc6ImyXG4gICAgICBhbnRpYWxpYXM6IHRydWVcbiAgICAgIC8vIOaKl+mUr+m9v1xuICAgIH0pO1xuXG4gICAgdGhpcy5nbCA9IHRoaXMucmVuZGVyZXIuZ2w7IC8vVElQIHdvcmtzIGxpa2UgYSBjYW52YXMgY29udGV4dFxuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmdsLmNhbnZhcyk7XG4gIH1cblxuICBjcmVhdGVDYW1lcmEoKSB7XG4gICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKHRoaXMuZ2wpXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IDVcblxuICB9XG5cbiAgY3JlYXRlU2NlbmUoKSB7XG4gICAgdGhpcy5zY2VuZSA9IG5ldyBUcmFuc2Zvcm0oKVxuICB9XG5cbiAgLyoqXG4gICAqIEhvbWUuXG4gICAqL1xuICBjcmVhdGVIb21lKCkge1xuICAgIHRoaXMuaG9tZSA9IG5ldyBIb21lKHtcbiAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBzaXplczogdGhpcy5zaXplc1xuICAgIH0pO1xuXG4gIH1cblxuICBkZXN0cm95SG9tZSgpIHtcbiAgICBpZiAoIXRoaXMuaG9tZSkgcmV0dXJuXG4gICAgLy8g5aaC5p6c5LiN5a2Y5ZyoaG9tZe+8jOWwsemUgOavgWhvbWXvvIzvvIHmmK/kuI3miJDnq4vnmoTmhI/mgJ3vvIzmnaHku7bkuLrlgYdcbiAgICB0aGlzLmhvbWUuZGVzdHJveSgpXG4gICAgdGhpcy5ob21lID0gbnVsbFxuICB9XG5cblxuICAvKipcbiAgICogQWJvdXQuXG4gICAqL1xuICBjcmVhdGVBYm91dCgpIHtcbiAgICB0aGlzLmFib3V0ID0gbmV3IEFib3V0KHtcbiAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBzaXplczogdGhpcy5zaXplc1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveUFib3V0KCkge1xuICAgIGlmICghdGhpcy5hYm91dCkgcmV0dXJuXG4gICAgLy8g5aaC5p6c5LiN5a2Y5ZyoYWJvdXTvvIzlsLHplIDmr4FhYm91dO+8jO+8geaYr+S4jeaIkOeri+eahOaEj+aAne+8jOadoeS7tuS4uuWBh1xuICAgIHRoaXMuYWJvdXQuZGVzdHJveSgpXG4gICAgdGhpcy5hYm91dCA9IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsZWN0aW9ucy5cbiAgICovXG4gIGNyZWF0ZUNvbGxlY3Rpb25zKCkge1xuICAgIHRoaXMuY29sbGVjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbnMoe1xuICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95Q29sbGVjdGlvbnMoKSB7XG4gICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zKSByZXR1cm5cbiAgICAvLyDlpoLmnpzkuI3lrZjlnKhDb2xsZWN0aW9uc++8jOWwsemUgOavgUNvbGxlY3Rpb25z77yM77yB5piv5LiN5oiQ56uL55qE5oSP5oCd77yM5p2h5Lu25Li65YGHXG4gICAgdGhpcy5jb2xsZWN0aW9ucy5kZXN0cm95KClcbiAgICB0aGlzLmNvbGxlY3Rpb25zID0gbnVsbFxuICB9XG5cblxuICAvKipcbiAgICogRGV0YWlsLlxuICAgKi9cbiAgY3JlYXRlRGV0YWlsKCkge1xuICAgIHRoaXMuZGV0YWlsID0gbmV3IERldGFpbCh7XG4gICAgICBnbDogdGhpcy5nbCxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXMsXG4gICAgICB0cmFuc2l0aW9uOiB0aGlzLnRyYW5zaXRpb25cbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lEZXRhaWwoKSB7XG4gICAgaWYgKCF0aGlzLmRldGFpbCkgcmV0dXJuXG4gICAgLy8g5aaC5p6c5LiN5a2Y5ZyoZGV0YWls77yM5bCx6ZSA5q+BZGV0YWls77yM77yB5piv5LiN5oiQ56uL55qE5oSP5oCd77yM5p2h5Lu25Li65YGHXG4gICAgdGhpcy5kZXRhaWwuZGVzdHJveSgpXG4gICAgdGhpcy5kZXRhaWwgPSBudWxsXG4gIH1cblxuXG4gIC8qKlxuICAgKiBFVkVOVFNcbiAgICovXG4gIG9uUHJlbG9hZGVkKCkge1xuICAgIHRoaXMub25DaGFuZ2VFbmQodGhpcy50ZW1wbGF0ZSlcbiAgfVxuXG4gIG9uQ2hhbmdlU3RhcnQodGVtcGxhdGUsIHVybCkge1xuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0LmhpZGUoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLmhpZGUoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS5oaWRlKClcbiAgICB9XG5cbiAgICB0aGlzLmlzRnJvbUNvbGxlY3Rpb25zVG9EZXRhaWwgPSB0aGlzLnRlbXBsYXRlID09PSAnY29sbGVjdGlvbnMnICYmIHVybC5pbmRleE9mKCdkZXRhaWwnKSA+IC0xOyAvLyBwcmV0dGllci1pZ25vcmVcbiAgICB0aGlzLmlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMgPSB0aGlzLnRlbXBsYXRlID09PSAnZGV0YWlsJyAmJiB1cmwuaW5kZXhPZignY29sbGVjdGlvbnMnKSA+IC0xOyAvLyBwcmV0dGllci1pZ25vcmVcblxuICAgIC8vIOWmguaenOaYr2RldGFpbOW5tuS4lCxjb2xsZWN0aW9ucyBhcmUgdGhlIHBhcnQgb2YgdGhlIHVybOS7lueahOWAvOWwseaYrz4tMeeahFxuXG4gICAgaWYgKHRoaXMuaXNGcm9tQ29sbGVjdGlvbnNUb0RldGFpbCB8fCB0aGlzLmlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMudHJhbnNpdGlvbiA9IG5ldyBUcmFuc2l0aW9uKHtcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgICBzaXplczogdGhpcy5zaXplcyxcbiAgICAgICAgdXJsLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnRyYW5zaXRpb24uc2V0RWxlbWVudCh0aGlzLmNvbGxlY3Rpb25zIHx8IHRoaXMuZGV0YWlsKTtcbiAgICB9XG4gIH1cbiAgb25DaGFuZ2VFbmQodGVtcGxhdGUpIHtcbiAgICAvLyDlsLHmmK/lvZPnlKjmiLdjaGFuZ2UgdGhlIHJvdXRlXG4gICAgaWYgKHRlbXBsYXRlID09PSAnYWJvdXQnKSB7XG4gICAgICB0aGlzLmNyZWF0ZUFib3V0KClcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuZGVzdHJveUFib3V0KClcbiAgICB9XG5cbiAgICBpZiAodGVtcGxhdGUgPT09ICdjb2xsZWN0aW9ucycpIHtcbiAgICAgIHRoaXMuY3JlYXRlQ29sbGVjdGlvbnMoKVxuICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5kZXN0cm95Q29sbGVjdGlvbnMoKVxuICAgIH1cblxuICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2RldGFpbCcpIHtcbiAgICAgIHRoaXMuY3JlYXRlRGV0YWlsKClcblxuICAgICAgLy8gR1NBUC5kZWxheWVkQ2FsbCgwLjUsIF8gPT4ge1xuICAgICAgLy8gICBpZih0aGlzLnRyYW5zaXRpb24pe1xuICAgICAgLy8gICAgIHRoaXMudHJhbnNpdGlvbi5hbmltYXRlRGV0YWlsKHRoaXMuZGV0YWlsKVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9KVxuICAgIH0gZWxzZSBpZiAodGhpcy5kZXRhaWwpIHtcbiAgICAgIHRoaXMuZGVzdHJveURldGFpbCgpXG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlID09PSAnaG9tZScpIHtcbiAgICAgIHRoaXMuY3JlYXRlSG9tZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdHJveUhvbWUoKVxuICAgIH1cblxuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZVxuXG4gIH1cblxuICBvblJlc2l6ZSgpIHtcbiAgICAvLyDlsIbmuLLmn5PnmoTnlLvluIPlsLrlr7jloavmu6Hop4bnqpflj6NcbiAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgLy8g5Yib5bu65LqGY2FtZXJh5LmL5ZCO5omN6IO95Yib5bu66YCP6KeG5Zu+XG4gICAgdGhpcy5jYW1lcmEucGVyc3BlY3RpdmUoeyBhc3BlY3Q6IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0IH0pO1xuXG4gICAgY29uc3QgZm92ID0gdGhpcy5jYW1lcmEuZm92ICogKE1hdGguUEkgLyAxODApO1xuICAgIGNvbnN0IGhlaWdodCA9IDIgKiBNYXRoLnRhbihmb3YgLyAyKSAqIHRoaXMuY2FtZXJhLnBvc2l0aW9uLno7XG4gICAgY29uc3Qgd2lkdGggPSBoZWlnaHQgKiB0aGlzLmNhbWVyYS5hc3BlY3Q7XG5cbiAgICB0aGlzLnNpemVzID0ge1xuICAgICAgaGVpZ2h0LFxuICAgICAgd2lkdGgsXG4gICAgfTtcblxuICAgIGNvbnN0IHZhbHVlcyA9IHsgc2l6ZXM6IHRoaXMuc2l6ZXMgfVxuXG4gICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25SZXNpemUodmFsdWVzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblJlc2l6ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgdGhpcy5kZXRhaWwub25SZXNpemUodmFsdWVzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25SZXNpemUodmFsdWVzKTtcbiAgICB9XG4gIH1cblxuICBvblRvdWNoRG93bihldmVudCkge1xuICAgIHRoaXMuaXNEb3duID0gdHJ1ZVxuICAgIHRoaXMueC5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgdGhpcy55LnN0YXJ0ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvblRvdWNoTW92ZShldmVudCkge1xuICAgIGlmICghdGhpcy5pc0Rvd24pIHJldHVyblxuXG4gICAgY29uc3QgeCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgY29uc3QgeSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICB0aGlzLnguZW5kID0geFxuICAgIHRoaXMueS5lbmQgPSB5XG5cblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvblRvdWNoVXAoZXZlbnQpIHtcbiAgICB0aGlzLmlzRG93biA9IGZhbHNlXG4gICAgY29uc3QgeCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzID8gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCA6IGV2ZW50LmNsaWVudFhcbiAgICBjb25zdCB5ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMgPyBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgdGhpcy54LmVuZCA9IHhcbiAgICB0aGlzLnkuZW5kID0geVxuXG4gICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgeDogdGhpcy54LFxuICAgICAgeTogdGhpcy55XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoVXAodmFsdWVzKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgdGhpcy5kZXRhaWwub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvbldoZWVsKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uV2hlZWwoZXZlbnQpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25XaGVlbChldmVudClcbiAgICB9XG4gIH1cblxuICAvLyBMb29wXG4gIHVwZGF0ZShzY3JvbGwpIHtcbiAgICAvLyDlrp7ml7bmuLLmn5NcbiAgICAvLyB0aGlzLm1lc2gucm90YXRpb24ueCArPSAwLjAxXG4gICAgLy8gdGhpcy5tZXNoLnJvdGF0aW9uLnkgKz0gMC4wMVxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0LnVwZGF0ZShzY3JvbGwpXG4gICAgfVxuICAgIC8vIOWboOS4uuWPquaciWFib3V0IHBhZ2XmnInkuIvmu5FcblxuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLnVwZGF0ZSgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICB0aGlzLmRldGFpbC51cGRhdGUoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS51cGRhdGUoKVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHtcbiAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZVxuICAgIH0pXG4gIH1cbn0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI5MGFlMjE5ODJiNGFjOTNmNGFmZVwiKSJdLCJuYW1lcyI6WyJDYW52YXMiLCJjb25zdHJ1Y3RvciIsInRlbXBsYXRlIiwidGhpcyIsIngiLCJzdGFydCIsImRpc3RhbmNlIiwiZW5kIiwieSIsImNyZWF0ZVJlbmRlcmVyIiwiY3JlYXRlQ2FtZXJhIiwiY3JlYXRlU2NlbmUiLCJvblJlc2l6ZSIsInJlbmRlcmVyIiwiUmVuZGVyZXIiLCJhbHBoYSIsImFudGlhbGlhcyIsImdsIiwiZG9jdW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjYW52YXMiLCJjYW1lcmEiLCJDYW1lcmEiLCJwb3NpdGlvbiIsInoiLCJzY2VuZSIsIlRyYW5zZm9ybSIsImNyZWF0ZUhvbWUiLCJob21lIiwiSG9tZSIsInNpemVzIiwiZGVzdHJveUhvbWUiLCJkZXN0cm95IiwiY3JlYXRlQWJvdXQiLCJhYm91dCIsIkFib3V0IiwiZGVzdHJveUFib3V0IiwiY3JlYXRlQ29sbGVjdGlvbnMiLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb25zIiwiZGVzdHJveUNvbGxlY3Rpb25zIiwiY3JlYXRlRGV0YWlsIiwiZGV0YWlsIiwiRGV0YWlsIiwidHJhbnNpdGlvbiIsImRlc3Ryb3lEZXRhaWwiLCJvblByZWxvYWRlZCIsIm9uQ2hhbmdlRW5kIiwib25DaGFuZ2VTdGFydCIsInVybCIsImhpZGUiLCJpc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsIiwiaW5kZXhPZiIsImlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMiLCJUcmFuc2l0aW9uIiwic2V0RWxlbWVudCIsInNldFNpemUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJwZXJzcGVjdGl2ZSIsImFzcGVjdCIsImZvdiIsIk1hdGgiLCJQSSIsImhlaWdodCIsInRhbiIsIndpZHRoIiwidmFsdWVzIiwib25Ub3VjaERvd24iLCJldmVudCIsImlzRG93biIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwiY2hhbmdlZFRvdWNoZXMiLCJvbldoZWVsIiwidXBkYXRlIiwic2Nyb2xsIiwicmVuZGVyIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9