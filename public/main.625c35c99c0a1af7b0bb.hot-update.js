/*! For license information please see main.625c35c99c0a1af7b0bb.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/index.js":(e,t,s)=>{s.r(t);var a=s("./node_modules/lodash/each.js"),n=s.n(a),i=s("./node_modules/normalize-wheel/index.js"),o=s.n(i),h=s("./app/components/Canvas/index.js"),c=s("./app/components/Navigation.js"),d=s("./app/components/Preloader.js"),p=s("./app/pages/About/About.js"),r=s("./app/pages/Collections/Collections.js"),l=s("./app/pages/Detail/Detail.js"),u=s("./app/pages/Home/index.js");new class{constructor(){this.createContent(),this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createPages(),this.addLinkListeners(),this.addEventListeners(),this.onResize(),this.update()}createNavigation(){this.navigation=new c.default({template:this.template})}createPreloader(){this.preloader=new d.default({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createCanvas(){this.canvas=new h.default({template:this.template})}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}createPages(){this.pages={about:new p.default,collections:new r.default,detail:new l.default,home:new u.default},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.onResize(),this.canvas.onPreloaded(),this.page.show()}async onChange(e){this.canvas.onChangeStart(this.template),await this.page.hide();const t=await fetch(e);if(200===t.status){const s=await t.text(),a=document.createElement("div");window.history.pushState({},"",e),a.innerHTML=s;const n=a.querySelector(".content");this.template=n.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.innerHTML=n.innerHTML,this.canvas.onChangeEnd(this.template),this.page=this.pages[this.template],this.page.create(),this.onResize(),this.page.show(),this.addLinkListeners()}else console.log("Error");console.log(t)}onResize(){window.requestAnimationFrame((e=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()})),this.page&&this.page.onResize&&this.page.onResize()}onTouchDown(e){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(e)}onTouchMove(e){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(e)}onTouchUp(e){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(e)}onWheel(e){const t=o()(e);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(t),this.page&&this.page.onWheel&&this.page.onWheel(t)}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),this.frame=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("mousewheel",this.onWheel.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const e=document.querySelectorAll("a");n()(e,(e=>{e.onclick=t=>{t.preventDefault();const{href:s}=e;this.onChange(s)}}))}}}},(function(e){e.h=()=>"9ea948ecf5c182c16839"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TWMsaUJBRU4sTUFBTSxLQUFFQyxHQUFTSCxFQUVqQnZFLEtBQUtvQyxTQUFTc0MsRUFBSyxDQUNwQixHQUVMLGtCQzlORkMsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9pbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIOWFs+S5juaVtOS4que9kemhteeahOWxleekuuS/oeaBr1xuaW1wb3J0IGVhY2ggZnJvbSAnbG9kYXNoL2VhY2gnO1xuaW1wb3J0IE5vcm1hbGl6ZVdoZWVsIGZyb20gJ25vcm1hbGl6ZS13aGVlbCdcblxuaW1wb3J0IENhbnZhcyBmcm9tICdjb21wb25lbnRzL0NhbnZhcyc7XG5pbXBvcnQgTmF2aWdhdGlvbiBmcm9tICcuL2NvbXBvbmVudHMvTmF2aWdhdGlvbic7XG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gJ2NvbXBvbmVudHMvUHJlbG9hZGVyJ1xuXG5pbXBvcnQgQWJvdXQgZnJvbSBcIi4vcGFnZXMvQWJvdXQvQWJvdXRcIjtcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tIFwiLi9wYWdlcy9Db2xsZWN0aW9ucy9Db2xsZWN0aW9uc1wiO1xuaW1wb3J0IERldGFpbCBmcm9tIFwiLi9wYWdlcy9EZXRhaWwvRGV0YWlsXCI7XG5pbXBvcnQgSG9tZSBmcm9tIFwiLi9wYWdlcy9Ib21lXCI7XG5cbmNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIOWPrOWUpFxuICAgIHRoaXMuY3JlYXRlQ29udGVudCgpXG4gICAgXG4gICAgdGhpcy5jcmVhdGVDYW52YXMoKVxuICAgIHRoaXMuY3JlYXRlUHJlbG9hZGVyKClcbiAgICB0aGlzLmNyZWF0ZU5hdmlnYXRpb24oKVxuIFxuICAgIHRoaXMuY3JlYXRlUGFnZXMoKVxuXG4gICAgdGhpcy5hZGRMaW5rTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5vblJlc2l6ZSgpXG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gIH1cbiAgLy8g5Yid5aeL5YyW57G7XG4gIGNyZWF0ZU5hdmlnYXRpb24oKSB7XG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gbmV3IE5hdmlnYXRpb24oeyB0ZW1wbGF0ZTogdGhpcy50ZW1wbGF0ZSB9KTtcbiAgfVxuXG4gIGNyZWF0ZVByZWxvYWRlcigpe1xuICAgIHRoaXMucHJlbG9hZGVyPW5ldyBQcmVsb2FkZXIoe1xuICAgICAgY2FudmFzIDogdGhpcy5jYW52YXNcbiAgICB9KVxuICAgIHRoaXMucHJlbG9hZGVyLm9uY2UoJ2NvbXBsZXRlZCcsdGhpcy5vblByZWxvYWRlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgY3JlYXRlQ2FudmFzKCl7XG4gICAgdGhpcy5jYW52YXMgPW5ldyBDYW52YXMoe1xuICAgICAgdGVtcGxhdGUgOnRoaXMudGVtcGxhdGVcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlQ29udGVudCgpIHtcbiAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpOyAvL0RFUzogc2VsZWN0aW5nIHRoZSBjb250ZW50IGNsYXNzXG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMuY29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKTsgLy9ERVM6IGdldHRpbmcgdGhlIGRhdGFzZXQtdGVtcGxhdGVcbiAgfVxuXG4gIGNyZWF0ZVBhZ2VzKCkge1xuICAgIC8vIOWIneWni+WMlumhtemdoizlhYjlu7rmlofmoaPvvIzlnKjlhpnov5nkuKrvvIzku5bkvJroh6rliqjlvLnlh7ppbXBvcnRcbiAgICB0aGlzLnBhZ2VzID0ge1xuICAgICAgYWJvdXQ6IG5ldyBBYm91dCgpLFxuICAgICAgY29sbGVjdGlvbnM6IG5ldyBDb2xsZWN0aW9ucygpLFxuICAgICAgZGV0YWlsOiBuZXcgRGV0YWlsKCksXG4gICAgICBob21lOiBuZXcgSG9tZSgpLFxuICAgIH1cbiAgICB0aGlzLnBhZ2UgPSB0aGlzLnBhZ2VzW3RoaXMudGVtcGxhdGVdXG4gICAgLy8g5L2g5Zyo5ZOq5Liq6aG16Z2i5bCx5riy5p+T5LqG5ZOq5Liq6aG16Z2i77yMZGF0YTB0ZW1wYWx0ZeWug+S9v+W+l+S9oOWPr+S7peWcqCBIVE1MIOWFg+e0oOS4reWtmOWCqOaVsOaNru+8jOeEtuWQjumAmui/hyBKYXZhU2NyaXB0IOadpeivu+WPluWSjOS9v+eUqOi/meS6m+aVsOaNru+8jFxuICAgIHRoaXMucGFnZS5jcmVhdGUoKVxuXG4gICAgXG4gIH1cblxuICAvKipcbiAgICogRXZlbnRzXG4gICAqL1xuICBvblByZWxvYWRlZCgpe1xuICAgIHRoaXMub25SZXNpemUoKVxuXG4gICAgdGhpcy5jYW52YXMub25QcmVsb2FkZWQoKVxuICAgIHRoaXMucGFnZS5zaG93KClcbiAgICAvLyDplIDmr4Et6YeN5paw5a6a5LmJ5bC65a+4LemhtemdouWxleekulxuICB9XG5cbiAgYXN5bmMgb25DaGFuZ2UodXJsKXsvLyDlkIzmraVodG1s6YeM55qEdXJs6ZO+5o6l77yM5L2/5b6X5ZyoY2hlY2vml7bkuI3kvJrnnIvliLDmsqHmnInmm7TmlrDnmoRjb250ZW505ZCN5a2XXG4gICAgdGhpcy5jYW52YXMub25DaGFuZ2VTdGFydCh0aGlzLnRlbXBsYXRlKVxuICAgIFxuICAgIGF3YWl0IHRoaXMucGFnZS5oaWRlKClcbiAgICAvLyDlvZPngrnlh7vml7bvvIzlvZPliY3pobXpnaLkvJrooqvpmpDol49cbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2godXJsKVxuICAgIGlmKHJlcXVlc3Quc3RhdHVzID09PSAyMDApe1xuICAgICAgY29uc3QgaHRtbD1hd2FpdCByZXF1ZXN0LnRleHQoKVxuICAgICAgY29uc3QgZGl2ID1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sIFwiXCIsIHVybClcbiAgICAgIC8vIOWwseaYr+ivtOS9oOeCueWHu+WTquS4qumhtemdoix1cmznmoTlkI7nvIDlsLHmmK/lk6rkuKrpobXpnaLnmoQvY29sbGVjdGlzb25zIG9yIC9hYm91dCBvciAvc2xhc2ggaG9tZVxuXG4gICAgICBkaXYuaW5uZXJIVE1MPWh0bWxcblxuICAgICAgY29uc3QgIGRpdkNvbnRlbnQgPWRpdi5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpXG5cbiAgICAgIHRoaXMudGVtcGxhdGU9ZGl2Q29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKVxuXG4gXG4gICAgICB0aGlzLm5hdmlnYXRpb24ub25DaGFuZ2UodGhpcy50ZW1wbGF0ZSlcblxuICAgICAgdGhpcy5jb250ZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10ZW1wbGF0ZScsdGhpcy50ZW1wbGF0ZSlcbiAgICAgIHRoaXMuY29udGVudC5pbm5lckhUTUw9ZGl2Q29udGVudC5pbm5lckhUTUxcblxuICAgICAgdGhpcy5jYW52YXMub25DaGFuZ2VFbmQodGhpcy50ZW1wbGF0ZSlcblxuICAgICAgdGhpcy5wYWdlID0gdGhpcy5wYWdlc1t0aGlzLnRlbXBsYXRlXVxuICAgICAgLy8g6L+Z5LiqdGVtcGxhdGXmmK/mlrDnmoTpobXpnaLnmoR0ZW1wbGF0ZVxuICAgICAgXG4gICAgICB0aGlzLnBhZ2UuY3JlYXRlKClcbiAgICAgIHRoaXMub25SZXNpemUoKVxuICAgICAgdGhpcy5wYWdlLnNob3coKVxuICAgICAgdGhpcy5hZGRMaW5rTGlzdGVuZXJzKClcbiAgICAgIC8vIOi/memHjOWPiOWGmeS4gOmBjeaYr+WboOS4uuWcqOWIm+W7uuaWsOeahOmhtemdouS5i+WQju+8jOacieS6m+mhtemdoumHjOmdoui/mOacieaWsOeahOmTvuaOpe+8jOaJgOS7peWcqOaOieS4gOasoei/meS4quaWueazlVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgY29uc29sZS5sb2coJ0Vycm9yJylcbiAgICB9XG5cbiAgICAvLyBpZiAocmVxdWVzdC5zdGF0dXMpXG4gICAgY29uc29sZS5sb2cocmVxdWVzdClcbiAgfVxuXG4gIG9uUmVzaXplKCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXyA9PntcbiAgICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblJlc2l6ZSkge1xuICAgICAgICB0aGlzLmNhbnZhcy5vblJlc2l6ZSgpO1xuICAgICAgfVxuICAgICAgLy8g5aSE55CG56qX5Y+j6LCD5pW05aSn5bCP5LqL5Lu255qE5Ye95pWw44CC5b2T5rWP6KeI5Zmo56qX5Y+j5aSn5bCP5pS55Y+Y5pe277yI5q+U5aaC55So5oi36LCD5pW056qX5Y+j5aSn5bCP5oiW6ICF6K6+5aSH5Y+R55Sf5peL6L2s77yJ77yM5Lya6Kem5Y+RIG9uUmVzaXplIOWHveaVsOOAglxuICAgIH0pXG4gICAgXG5cbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS5vblJlc2l6ZSkge1xuICAgICAgdGhpcy5wYWdlLm9uUmVzaXplKCk7XG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaERvd24oZXZlbnQpe1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoRG93bikge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaERvd24oZXZlbnQpO1xuICAgIH1cblxuXG4gIH1cblxuICBvblRvdWNoTW92ZShldmVudCl7XG4gICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLm9uVG91Y2hNb3ZlKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vblRvdWNoTW92ZShldmVudCk7XG4gICAgfVxuXG4gIH1cblxuICBvblRvdWNoVXAoZXZlbnQpe1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoVXApIHtcbiAgICAgIHRoaXMuY2FudmFzLm9uVG91Y2hVcChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgb25XaGVlbChldmVudCl7XG4gICAgY29uc3Qgbm9ybWFsaXplZFdoZWVsID0gTm9ybWFsaXplV2hlZWwoZXZlbnQpO1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vbldoZWVsKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vbldoZWVsKG5vcm1hbGl6ZWRXaGVlbCk7XG4gICAgICAvLyDosIPnlKjnlLvluIPnmoRvbldoZWVs55qE5pa55rOV77yM5bm25bCG5qCH5YeG5YyW5aSE55CG5ZCO55qE5rua5Yqo5YC85L2c5Li65Y+C5pWw5Lyg6L+b5Y67XG4gICAgfVxuICAgXG4gICAgaWYgKHRoaXMucGFnZSAmJiB0aGlzLnBhZ2Uub25XaGVlbCkge1xuICAgICAgdGhpcy5wYWdlLm9uV2hlZWwobm9ybWFsaXplZFdoZWVsKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBMb29wXG4gICAqL1xuXG4gIHVwZGF0ZSgpeyAvLyDliqjnlLvmiJbpobXpnaLmm7TmlrDnmoTlvqrnjq9cbiAgIFxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLnVwZGF0ZSkge1xuICAgICAgdGhpcy5wYWdlLnVwZGF0ZSgpO1xuICAgIH1cbiAgICAvLyDlhYjmuLLmn5PpobXpnaLvvIzlm6DkuLrmnIljb3JyZWN0IFkgcG9zaXRpb27vvIzmiYDku6XlkI7pnaLnmoRjYW52YXPnmoRZ5Lmf5Lya6Lef552A5pu05pawXG5cbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMudXBkYXRlKSB7XG4gICAgICB0aGlzLmNhbnZhcy51cGRhdGUodGhpcy5wYWdlLnNjcm9sbCk7XG4gICAgfVxuXG4gICAgdGhpcy5mcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuZXJzXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVycygpe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcy5vbldoZWVsLmJpbmQodGhpcykpXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vblRvdWNoRG93bi5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uVG91Y2hVcC5iaW5kKHRoaXMpKVxuICAgIC8vIOeUteiEkeerr+eahFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoRG93bi5iaW5kKHRoaXMpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoVXAuYmluZCh0aGlzKSlcbiAgICAvLyDnp7vliqjnq6/nmoRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFkZExpbmtMaXN0ZW5lcnMoKSB7Ly8g6ZO+5o6l6Lez6L2s5aSE55CGXG5cbiAgICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKVxuICAgIC8vIOmAieaLqeaJgOaciemTvuaOpe+8jGxpbmtz5piv5pWw57uEXG5cbiAgICBlYWNoKGxpbmtzLCAobGluaykgPT4ge1xuICAgICAgbGluay5vbmNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICBjb25zdCB7IGhyZWYgfSA9IGxpbmtcblxuICAgICAgICB0aGlzLm9uQ2hhbmdlKGhyZWYpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxubmV3IEFwcCgpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiOWVhOTQ4ZWNmNWMxODJjMTY4MzlcIikiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ0aGlzIiwiY3JlYXRlQ29udGVudCIsImNyZWF0ZUNhbnZhcyIsImNyZWF0ZVByZWxvYWRlciIsImNyZWF0ZU5hdmlnYXRpb24iLCJjcmVhdGVQYWdlcyIsImFkZExpbmtMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVycyIsIm9uUmVzaXplIiwidXBkYXRlIiwibmF2aWdhdGlvbiIsIk5hdmlnYXRpb24iLCJ0ZW1wbGF0ZSIsInByZWxvYWRlciIsIlByZWxvYWRlciIsImNhbnZhcyIsIm9uY2UiLCJvblByZWxvYWRlZCIsImJpbmQiLCJDYW52YXMiLCJjb250ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0QXR0cmlidXRlIiwicGFnZXMiLCJhYm91dCIsIkFib3V0IiwiY29sbGVjdGlvbnMiLCJDb2xsZWN0aW9ucyIsImRldGFpbCIsIkRldGFpbCIsImhvbWUiLCJIb21lIiwicGFnZSIsImNyZWF0ZSIsInNob3ciLCJvbkNoYW5nZSIsInVybCIsIm9uQ2hhbmdlU3RhcnQiLCJoaWRlIiwicmVxdWVzdCIsImZldGNoIiwic3RhdHVzIiwiaHRtbCIsInRleHQiLCJkaXYiLCJjcmVhdGVFbGVtZW50Iiwid2luZG93IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImlubmVySFRNTCIsImRpdkNvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJvbkNoYW5nZUVuZCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJfIiwib25Ub3VjaERvd24iLCJldmVudCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsIm5vcm1hbGl6ZWRXaGVlbCIsIk5vcm1hbGl6ZVdoZWVsIiwic2Nyb2xsIiwiZnJhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwibGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWFjaCIsImxpbmsiLCJvbmNsaWNrIiwicHJldmVudERlZmF1bHQiLCJocmVmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9