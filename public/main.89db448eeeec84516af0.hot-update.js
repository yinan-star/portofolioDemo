/*! For license information please see main.89db448eeeec84516af0.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/collections/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var l=s("./node_modules/ogl/src/core/Transform.js"),i=s("./node_modules/ogl/src/extras/Plane.js"),o=s("./node_modules/gsap/index.js"),r=s("./node_modules/prefix/index.js"),c=s.n(r),n=s("./node_modules/lodash/map.js"),h=s.n(n),a=s("./app/components/Canvas/collections/Media.js");const d=class{constructor({gl:t,scene:e,sizes:s}){this.gl=t,this.scene=e,this.sizes=s,this.transformPrefix=c()("transform"),this.group=new l.Transform,this.galleryElement=document.querySelector(".collections__gallery__wrapper"),this.titlesElement=document.querySelector(".collections__titles"),this.collectionsElements=document.querySelectorAll(".collections__article"),this.collectionsElementsActive="collections__article--active",this.mediasElements=document.querySelectorAll(".collections__gallery__media"),this.scroll={current:0,target:0,lerp:.1},this.scroll={current:0,target:0,last:0,lerp:.1,velocity:1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new i.Plane(this.gl)}createGallery(){this.medias=h()(this.mediasElements,((t,e)=>new a.default({element:t,geometry:this.geometry,gl:this.gl,index:e,scene:this.group,sizes:this.sizes})))}show(){h()(this.medias,(t=>t.show()))}hide(){h()(this.medias,(t=>t.hide()))}onResize(t){this.sizes=t.sizes,this.bounds=this.galleryElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,h()(this.medias,(e=>e.onResize(t,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:t,y:e}){this.scroll.last=this.scroll.current}onTouchMove({x:t,y:e}){const s=t.start-t.end;this.scroll.target=this.scroll.last-s}onTouchUp({x:t,y:e}){}onWheel({pixelY:t}){this.scroll.target+=t}onChange(t){this.index=t;const e=parseInt(this.mediasElements[this.index].getAttribute("data-index"));h()(this.collectionsElements,((t,s)=>{s===e?t.classList.add(this.collectionsElementsActive):t.classList.remove(this.collectionsElementsActive)})),this.titlesElement.style[this.transformPrefix]=`translateY(-${25*e}%) translate(-50%, -50%) rotate(90deg)`}update(){if(!this.bounds)return;this.scroll.target=o.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=o.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current,h()(this.medias,((t,e)=>{t.update(this.scroll.current)}));const t=Math.floor(Math.abs(this.scroll.current/this.scroll.limit)*this.medias.length);this.index!==t&&this.onChange(t)}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"46d3346c5c6e0c58619c"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEsR0FDSSxJQUFLMUQsS0FBS2tDLE9BQVEsT0FFbEJsQyxLQUFLYSxPQUFPRSxPQUFTNEMsRUFBQUEsUUFBS0MsTUFBTUMsT0FBUTdELEtBQUthLE9BQU91QixNQUFPLEVBQUdwQyxLQUFLYSxPQUFPRSxRQUcxRWYsS0FBS2EsT0FBT0MsUUFBVTZDLEVBQUFBLFFBQUtDLE1BQU1FLFlBQVk5RCxLQUFLYSxPQUFPQyxRQUFTZCxLQUFLYSxPQUFPRSxPQUFRZixLQUFLYSxPQUFPRyxNQUU5RmhCLEtBQUthLE9BQU9JLEtBQU9qQixLQUFLYSxPQUFPQyxRQUMvQmQsS0FBS2EsT0FBT2tELFVBQVksUUFDakIvRCxLQUFLYSxPQUFPSSxLQUFPakIsS0FBS2EsT0FBT0MsVUFDdENkLEtBQUthLE9BQU9rRCxVQUFZLFFBSTVCL0QsS0FBS2EsT0FBT0ksS0FBT2pCLEtBQUthLE9BQU9DLFFBRS9CWSxJQUFJMUIsS0FBS3lCLFFBQVEsQ0FBQ0ssRUFBT0YsS0FDckJFLEVBQU00QixPQUFPMUQsS0FBS2EsT0FBT0MsUUFBUSxJQUlyQyxNQUFNYyxFQUFPb0MsS0FBS0MsTUFBTUQsS0FBS0UsSUFBSWxFLEtBQUthLE9BQU9DLFFBQVVkLEtBQUthLE9BQU91QixPQUFTcEMsS0FBS3lCLE9BQU8wQyxRQUVyRm5FLEtBQUs0QixRQUFVQSxHQUNkNUIsS0FBS2lELFNBQVNyQixFQUV0QixDQUtBd0MsT0FBQUEsR0FDSXBFLEtBQUtGLE1BQU11RSxZQUFZckUsS0FBS0csTUFDaEMsa0JDN0tKbUUsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9jb2xsZWN0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCc7XG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuaW1wb3J0IFByZWZpeCBmcm9tICdwcmVmaXgnXG5cbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCdcblxuaW1wb3J0IE1lZGlhIGZyb20gJy4vTWVkaWEnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMgfSkge1xuICAgICAgICB0aGlzLmdsID0gZ2w7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuICAgICAgICB0aGlzLnNpemVzID0gc2l6ZXM7XG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKCk7XG5cbiAgICAgICAgdGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19fZ2FsbGVyeV9fd3JhcHBlcicpXG5cbiAgICAgICAgdGhpcy50aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGxlY3Rpb25zX190aXRsZXMnKVxuXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsZWN0aW9uc19fYXJ0aWNsZScpXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnNFbGVtZW50c0FjdGl2ZSA9ICdjb2xsZWN0aW9uc19fYXJ0aWNsZS0tYWN0aXZlJ1xuXG4gICAgICAgIHRoaXMubWVkaWFzRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgICAgJy5jb2xsZWN0aW9uc19fZ2FsbGVyeV9fbWVkaWEnXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5zY3JvbGwgPSB7XG4gICAgICAgICAgICBjdXJyZW50OiAwLFxuICAgICAgICAgICAgdGFyZ2V0OiAwLFxuICAgICAgICAgICAgbGVycDogMC4xXG4gICAgICAgIH1cblxuXG4gICAgICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgICAgICAgY3VycmVudDogMCxcbiAgICAgICAgICAgIHRhcmdldDogMCxcbiAgICAgICAgICAgIGxhc3Q6IDAsXG4gICAgICAgICAgICBsZXJwOiAwLjEsXG4gICAgICAgICAgICB2ZWxvY2l0eTogMVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZUdhbGxlcnkoKTtcblxuXG4gICAgICAgIHRoaXMuZ3JvdXAuc2V0UGFyZW50KHRoaXMuc2NlbmUpO1xuXG4gICAgICAgIHRoaXMuc2hvdygpXG4gICAgICAgIC8vIOWnkO+8jGNvbnN0cnVjdG9y5qC85byP5pivKHt9KXt944CC5LiN6KaB5b+Y6K6w5LqGXG5cbiAgICB9XG5cbiAgICBjcmVhdGVHZW9tZXRyeSgpIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsKVxuICAgIH1cblxuICAgIGNyZWF0ZUdhbGxlcnkoKSB7XG4gICAgICAgIC8vIOS8oOWIsE1lZGlh6YeM6Z2iXG4gICAgICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZWRpYSh7XG4gICAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcbiAgICAgICAgICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcbiAgICAgICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQW5pbWF0aW9uc1xuICAgIHNob3coKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuc2hvdygpKVxuICAgIH1cbiAgICBoaWRlKCkge1xuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLmhpZGUoKSlcbiAgICB9XG5cbiAgICAvLyBFdmVudHNcbiAgICBvblJlc2l6ZShldmVudCkge1xuICAgICAgICB0aGlzLnNpemVzID0gZXZlbnQuc2l6ZXNcbiAgICAgICAgLy8g5bGP5bmV55qE5bC65a+477yM57uZdXBkYXRl6ICM5LiN5piv55S75biD55qEXG4gICAgICAgIHRoaXMuYm91bmRzID0gdGhpcy5nYWxsZXJ5RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAvLyDojrflj5blhYPntKDnmoTkvY3nva7lkozlsLrlr7hcblxuICAgICAgICAvLyDorqHnrpflvZPliY3nlLvlu4rnmoTlrr3luqbljaDop4bnqpflj6PnmoTlrr3luqbnmoTlpJrlsJHnhLblkI7kuZjku6XlhbfkvZPnmoTlrr3luqYtLT7lsIblhYPntKDlnKjop4blj6PkuK3nmoTmr5TkvovovazmjaLkuLrlhbfkvZPnmoTlrp7pmYXlrr3luqbjgILlk43lupTlvI/luIPlsYBcbiAgICAgICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcblxuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLm9uUmVzaXplKGV2ZW50LCB0aGlzLnNjcm9sbCkpXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoXG5cbiAgICB9XG5cbiAgICBvblRvdWNoRG93bih7IHgsIHkgfSkge1xuICAgICAgICB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuICAgIH1cblxuICAgIG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCAtIGRpc3RhbmNlXG4gICAgICAgIC8vIOWmguaenOm8oOagh+WSjOWbvueJh+eahOenu+WKqOebuOWPjeaWueWQke+8jOimgeeUqOWHj+WPt1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNjcm9sbC50YXJnZXQsIGRpc3RhbmNlKVxuICAgICAgICAvLyDlpoLmnpzlm77niYfkuI3og73np7vliqjvvIznnIvkuIvpvKDmoIfog73kuI3og73np7vliqjmlbDmja7vvIzlpoLmnpzpvKDmoIfog73np7vliqjmlbDmja7vvIzpgqPlsLHmmK/msqHmnInmiorov5nkuKrlgLznu5nliLBtZWRpYeiuqeWbvueJh+enu+WKqFxuICAgIH1cblxuICAgIG9uVG91Y2hVcCh7IHgsIHkgfSkge1xuXG4gICAgfVxuXG4gICAgb25XaGVlbCh7IHBpeGVsWSB9KSB7XG4gICAgICAgIC8vIOaNleiOt+a7muWKqOS6i+S7tueahOWDj+e0oOWAvO+8jOeEtuWQjuagueaNrui/meS6m+WAvOadpeabtOaWsOmhtemdouS4reafkOS6m+WFg+e0oOeahOS9jee9ruaIlueKtuaAge+8jOWunueOsOmhtemdoueahOa7muWKqOaIluinhuWbvueahOWPmOWMllxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlZOiBlOWKqOWKqOeUu+WbvueJh+aWh+Wtl+agh+mimFxuICAgICAqL1xuICAgIG9uQ2hhbmdlIChpbmRleCl7XG4gICAgICAgIC8vIOS7juWFtuS7luWcsOaWueaOpeWPl+e0ouW8lSzpvKDmoIfmu5HliqjvvIzlt6bkuIvop5LmloflrZflhoXlrrnot5/nnYDlm77niYflj5jljJZcbiAgICAgICAgdGhpcy5pbmRleCA9aW5kZXhcblxuICAgICAgICBjb25zdCBzZWxlY3RlZENvbGxlY3Rpb24gPSBwYXJzZUludCh0aGlzLm1lZGlhc0VsZW1lbnRzW3RoaXMuaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpKVxuXG4gICAgICAgIG1hcCh0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHMsIChlbGVtZW50LGVsZW1lbnRJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYoZWxlbWVudEluZGV4ID09PSBzZWxlY3RlZENvbGxlY3Rpb24pe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb2xsZWN0aW9uc0VsZW1lbnRzQWN0aXZlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMudGl0bGVzRWxlbWVudC5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgdHJhbnNsYXRlWSgtJHsyNSAqIHNlbGVjdGVkQ29sbGVjdGlvbn0lKSB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKDkwZGVnKWBcbiAgICB9XG5cbiAgICAvLyBVcGRhdGVcbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5ib3VuZHMpIHJldHVyblxuXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoIC10aGlzLnNjcm9sbC5saW1pdCwgMCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxuICAgICAgICAvLyDmu5rliqjmu5rova7pmZDliLZcblxuICAgICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIHRoaXMuc2Nyb2xsLmxlcnApXG5cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLmxhc3QgPCB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbC5kaXJlY3Rpb24gPSAncmlnaHQnXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGwubGFzdCA+IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdsZWZ0J1xuICAgICAgICB9XG4gICAgICAgIC8vIOajgOa1i+m8oOagh+a7muWKqOaWueWQke+8jOW9k+WJjeS9jee9ruWSjOWFiOWJjeS9jee9ruWBmuavlOi+g+OAglxuXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG5cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudClcbiAgICAgICAgfSlcbiAgICAgICAgLy8g5Lyg57uZbWVkaWHmlofku7Ys5bCG5b2T5YmN55qE6byg5qCH5rua5Yqo5L2N572u5Lyg57uZbWVkaWFcblxuICAgICAgICBjb25zdCBpbmRleCA9TWF0aC5mbG9vcihNYXRoLmFicyh0aGlzLnNjcm9sbC5jdXJyZW50IC8gdGhpcy5zY3JvbGwubGltaXQpICogdGhpcy5tZWRpYXMubGVuZ3RoKVxuICAgICAgICAvLyBNYXRoLmZsb29yLOWPluaVtOaVsO+8jOa7muWKqOeJueWumui3neemu+WQjuehruWumuWbvueJh+WFg+e0oOWcqOaVsOe7hOS4reeahOe0ouW8lVxuICAgICAgICBpZih0aGlzLmluZGV4ICE9PSBpbmRleCl7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGluZGV4KSAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95XG4gICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxuICAgIH1cblxufSIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjQ2ZDMzNDZjNWM2ZTBjNTg2MTljXCIpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwidGhpcyIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsImdyb3VwIiwiVHJhbnNmb3JtIiwiZ2FsbGVyeUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aXRsZXNFbGVtZW50IiwiY29sbGVjdGlvbnNFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb2xsZWN0aW9uc0VsZW1lbnRzQWN0aXZlIiwibWVkaWFzRWxlbWVudHMiLCJzY3JvbGwiLCJjdXJyZW50IiwidGFyZ2V0IiwibGVycCIsImxhc3QiLCJ2ZWxvY2l0eSIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJtZWRpYSIsImhpZGUiLCJvblJlc2l6ZSIsImV2ZW50IiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGltaXQiLCJ3aWR0aCIsImNsaWVudFdpZHRoIiwib25Ub3VjaERvd24iLCJ4IiwieSIsIm9uVG91Y2hNb3ZlIiwiZGlzdGFuY2UiLCJzdGFydCIsImVuZCIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJvbkNoYW5nZSIsInNlbGVjdGVkQ29sbGVjdGlvbiIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwiZWxlbWVudEluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3R5bGUiLCJ1cGRhdGUiLCJHU0FQIiwidXRpbHMiLCJjbGFtcCIsImludGVycG9sYXRlIiwiZGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibGVuZ3RoIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9