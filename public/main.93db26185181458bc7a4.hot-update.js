/*! For license information please see main.93db26185181458bc7a4.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/Detail/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var i=s("./node_modules/ogl/src/extras/Plane.js"),h=s("./node_modules/ogl/src/core/Program.js"),o=s("./node_modules/ogl/src/core/Mesh.js"),n=s("./app/shaders/plane-fragment.glsl"),a=s("./app/shaders/plane-vertex.glsl");const c=class{constructor({gl:e,scene:t,sizes:s}){this.element=document.querySelector(".detail__media__image"),this.gl=e,this.scene=t,this.sizes=s,this.geometry=new i.Plane(this.gl),this.createTexture(),this.createProgram(),this.createMesh()}createTexture(){const e=this.element.getAttribute("data-src");this.texture=window.TEXTURES[e]}createProgram(){this.program=new h.Program(this.gl,{fragment:n.default,vertex:a.default,uniforms:{uAlpha:{value:1},tMap:{value:this.texture}}})}createMesh(){this.mesh=new o.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.setParent(this.scene)}createBounds({sizes:e}){this.sizes=e,this.bounds=this.element.getBoundingClientRect(),this.upadteScale(),this.upadteX(),this.upadteY()}show(){}hide(){}onResize(e){this.createBounds(e),this.upadteX(),this.upadteY()}upadteScale(){this.height=this.bounds.height/window.innerHeight,this.width=this.bounds.width/window.innerWidth,this.mesh.scale.x=this.sizes.width*this.width,this.mesh.scale.y=this.sizes.height*this.height}upadteX(){this.x=this.bounds.left/window.innerWidth,this.mesh.position.x=-this.sizes.width/2+this.mesh.scale.x/2+this.x*this.sizes.width}upadteY(){this.y=this.bounds.top/window.innerHeight,this.mesh.position.y=this.sizes.height/2-this.mesh.scale.y/2-this.y*this.sizes.height}update(){this.bounds&&(this.upadteX(),this.upadteY())}}},"./app/components/Canvas/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s("./node_modules/ogl/src/core/Renderer.js"),h=s("./node_modules/ogl/src/core/Camera.js"),o=s("./node_modules/ogl/src/core/Transform.js"),n=s("./app/components/Canvas/home/index.js"),a=s("./app/components/Canvas/about/index.js"),c=s("./app/components/Canvas/collections/index.js"),l=s("./app/components/Canvas/Detail/index.js"),r=s("./app/components/Canvas/Transition.js");class d{constructor({template:e}){this.template=e,this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},this.createRenderer(),this.createCamera(),this.createScene(),this.onResize()}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antialias:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new h.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new o.Transform}createHome(){this.home=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null)}createAbout(){this.about=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null)}createCollections(){this.collections=new c.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createDetail(){this.detail=new l.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onChangeEnd(this.template)}onChangeStart(e,t){this.about&&this.about.hide(),this.collections&&this.collections.hide(),this.home&&this.home.hide(),this.isFromCollectionsToDetail="collections"===this.template&&t.indexOf("detail")>-1,this.isFromDetailToCollections="detail"===this.template&&t.indexOf("collections")>-1,(this.isFromCollectionsToDetail||this.isFromDetailToCollections)&&(this.transition=new r.default({collections:this.collections,gl:this.gl,scene:this.scene,sizes:this.sizes,url:t}))}onChangeEnd(e){"about"===e?this.createAbout():this.about&&this.destroyAbout(),"collections"===e?this.createCollections():this.collections&&this.destroyCollections(),"detail"===e?this.createDetail():this.detail&&this.destroyDetail(),"home"===e?this.createHome():this.destroyHome(),this.template=e}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const e=this.camera.fov*(Math.PI/180),t=2*Math.tan(e/2)*this.camera.position.z,s=t*this.camera.aspect;this.sizes={height:t,width:s};const i={sizes:this.sizes};this.about&&this.about.onResize(i),this.collections&&this.collections.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(e){this.isDown=!0,this.x.start=e.touches?e.touches[0].clientX:e.clientX,this.y.start=e.touches?e.touches[0].clientY:e.clientY;const t={x:this.x,y:this.y};this.about&&this.about.onTouchDown(t),this.collections&&this.collections.onTouchDown(t),this.home&&this.home.onTouchDown(t)}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchMove(i),this.collections&&this.collections.onTouchMove(i),this.home&&this.home.onTouchMove(i)}onTouchUp(e){this.isDown=!1;const t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.about&&this.about.onTouchUp(i),this.collections&&this.collections.onTouchUp(i),this.home&&this.home.onTouchUp(i)}onWheel(e){this.home&&this.home.onWheel(e),this.collections&&this.collections.onWheel(e)}update(e){this.about&&this.about.update(e),this.collections&&this.collections.update(),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}}},(function(e){e.h=()=>"0f83bbc3ff9627a0da61"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtyQixTQUdaNUMsS0FBS3FELFNBQVN3RCxPQUFPLENBQ25CakQsT0FBUTVELEtBQUs0RCxPQUNiOUQsTUFBT0UsS0FBS0YsT0FFaEIsa0JDblZGZ0gsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9EZXRhaWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL2luZGV4LmpzIiwid2VicGFjazovL2Zsb2VtYS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gLy/lpITnkIbnhafniYdcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgeyBNZXNoLCBQbGFuZSwgUHJvZ3JhbSB9IGZyb20gJ29nbCc7XG5cbmltcG9ydCBmcmFnbWVudCBmcm9tICdzaGFkZXJzL3BsYW5lLWZyYWdtZW50Lmdsc2wnO1xuaW1wb3J0IHZlcnRleCBmcm9tICdzaGFkZXJzL3BsYW5lLXZlcnRleC5nbHNsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMgfSkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxfX21lZGlhX19pbWFnZScpXG4gICAgdGhpcy5nbCA9IGdsO1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLnNpemVzID0gc2l6ZXM7XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wpXG4gICAgLy8g5LiK6Z2i55qEZWxtZW506YO95piv6ZyA6KaB5aSN55So55qE5omA5Lul5Zyo6L+Z6YeM5Yid5aeL5YyWXG5cbiAgICB0aGlzLmNyZWF0ZVRleHR1cmUoKTtcbiAgICB0aGlzLmNyZWF0ZVByb2dyYW0oKTtcbiAgICB0aGlzLmNyZWF0ZU1lc2goKTtcbiAgfVxuICBjcmVhdGVUZXh0dXJlKCkge1xuICAgIC8vIOWcqHNoYWRlcumHjOmdouWBmueahOa4kOWPmFxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKVxuICAgIHRoaXMudGV4dHVyZSA9IHdpbmRvdy5URVhUVVJFU1tpbWFnZV1cbiAgICAvLyB0aGlzLnRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmdsKVxuXG4gICAgLy8gY29uc3QgaW1hZ2UgPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX21lZGlhX19pbWFnZScpXG5cbiAgICAvLyB0aGlzLmltYWdlID0gbmV3IHdpbmRvdy5JbWFnZSgpXG4gICAgLy8gdGhpcy5pbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnXG4gICAgLy8gLy8g5Zug5Li65Zu+54mH5piv5LuOcHJlc21pY+adpeeahO+8jOaJgOS7peimgeWMv+WQjVxuICAgIC8vIHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpXG4gICAgLy8gdGhpcy5pbWFnZS5vbmxvYWQgPSBfID0+ICh0aGlzLnRleHR1cmUuaW1hZ2UgPSB0aGlzLmltYWdlKVxuICAgIC8vIC8vIOWmguaenOWbvueJh+aYr+m7keiJsueahOadkOi0qO+8jOeci+i/memHjO+8jGdldEF0dHJpYnV0ZeaYr+ebtOaOpWltYWdlLuiAjOS4jeaYr3RoaXMuaW1hZ2VcbiAgICAvLyAvLyB0aGlzLmltYWdlIOW9k+WJjeexu+eahOWunuS+i+WvueixoeS4iueahOS4gOS4quWxnuaAp++8jGltYWdlIOWPquaYr+S4gOS4quWcqOaWueazleS4reS4tOaXtuWtmOWCqOWbvueJh+WFg+e0oOeahOWPmOmHj1xuICB9XG5cbiAgLy8g54S25ZCO5bCG6YCJ5aW955qE54Wn54mH5Lyg57uZcHJvZ3JhbeWkhOeQhui0tOWbvlxuICBjcmVhdGVQcm9ncmFtKCkge1xuICAgIHRoaXMucHJvZ3JhbSA9IG5ldyBQcm9ncmFtKHRoaXMuZ2wsIHtcbiAgICAgIGZyYWdtZW50LFxuICAgICAgdmVydGV4LFxuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdUFscGhhOiB7IHZhbHVlOiAxIH0sXG4gICAgICAgIHRNYXA6IHsgdmFsdWU6IHRoaXMudGV4dHVyZSB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZU1lc2goKSB7XG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2godGhpcy5nbCwge1xuICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXG4gICAgICBwcm9ncmFtOiB0aGlzLnByb2dyYW0sXG4gICAgfSk7XG5cbiAgICB0aGlzLm1lc2guc2V0UGFyZW50KHRoaXMuc2NlbmUpO1xuICAgIC8vIG1lc2jmmK9zY2VuZeeahOWtkOWFg+e0oOOAglxuXG4gIH1cblxuICBjcmVhdGVCb3VuZHMoeyBzaXplcyB9KSB7XG4gICAgLy8g5bCGbWVzaOWSjGdhbGxlcnnmiYDorr7lrprnmoTlsLrlr7jnu5HlrppcbiAgICB0aGlzLnNpemVzID0gc2l6ZXNcbiAgICAvLyDliJ3lp4vljJZzaXplc++8jOiuqeS7luWPmOaIkOS4i+mdouWPr+S7pemHjeWkjeWIqeeUqOeahOWxnuaAp1xuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICB0aGlzLnVwYWR0ZVNjYWxlKClcbiAgICB0aGlzLnVwYWR0ZVgoKVxuICAgIHRoaXMudXBhZHRlWSgpXG4gIH1cblxuICAvLyBBbmltYXRpb25zLlxuICBzaG93KCkge1xuXG4gIH1cblxuICBoaWRlKCkge1xuXG4gIH1cblxuICAvLyBFdmVudHNcbiAgb25SZXNpemUoc2l6ZXMpIHtcbiAgICB0aGlzLmNyZWF0ZUJvdW5kcyhzaXplcylcbiAgICB0aGlzLnVwYWR0ZVgoKVxuICAgIHRoaXMudXBhZHRlWSgpXG5cbiAgfVxuXG4gIC8vIExvb3BcbiAgdXBhZHRlU2NhbGUoKSB7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmJvdW5kcy5oZWlnaHQgLyB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICB0aGlzLndpZHRoID0gdGhpcy5ib3VuZHMud2lkdGggLyB3aW5kb3cuaW5uZXJXaWR0aFxuXG4gICAgdGhpcy5tZXNoLnNjYWxlLnggPSB0aGlzLnNpemVzLndpZHRoICogdGhpcy53aWR0aFxuICAgIHRoaXMubWVzaC5zY2FsZS55ID0gdGhpcy5zaXplcy5oZWlnaHQgKiB0aGlzLmhlaWdodFxuICAgIC8vIOaIkeeMnOaYr+aKindlYkds5Zu+54mH5Y+Y5oiQ5Y2V5L2N5ZCR6YeP54S25ZCO5YaN5LmY5Lul5q2j56Gu55qE5Zu+54mH55qE5a696auY77yM6K6p6L+Z5Lqb5Zu+54mH5bC65a+4bWF0Y2jljp/lm75cblxuXG4gIH1cblxuICB1cGFkdGVYKCkge1xuICAgIHRoaXMueCA9ICh0aGlzLmJvdW5kcy5sZWZ0KSAvIHdpbmRvdy5pbm5lcldpZHRoXG4gICAgdGhpcy5tZXNoLnBvc2l0aW9uLnggPSAoLXRoaXMuc2l6ZXMud2lkdGggLyAyKSArICh0aGlzLm1lc2guc2NhbGUueCAvIDIpICsgKHRoaXMueCAqIHRoaXMuc2l6ZXMud2lkdGgpXG4gICAgLy8gd2lkdGjlkoxoZWlnaHTmmK/op4bnqpfnmoTlrr3pq5jjgILkuZ/lsLHmmK9tZXNo55qEcG9zaXRpb27nmoTljp/ngrnlnKjop4bnqpflj6PnmoTmraPkuK3lv4NcbiAgICAvLyAtd2lkdGggLyAyIOi/meS4qumDqOWIhuWwseaYr+WwhuaJgOaciW1lc2jnmoTljp/ngrlwb3NpdGlvbuenu+WIsOinhueql+eahOW3puS4iuinklxuICB9XG5cbiAgdXBhZHRlWSgpIHtcbiAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wKSAvIHdpbmRvdy5pbm5lckhlaWdodFxuICAgIHRoaXMubWVzaC5wb3NpdGlvbi55ID0gKHRoaXMuc2l6ZXMuaGVpZ2h0IC8gMikgLSAodGhpcy5tZXNoLnNjYWxlLnkgLyAyKSAtICh0aGlzLnkgKiB0aGlzLnNpemVzLmhlaWdodClcbiAgICAvLyDov5nkuKp45piv5LmL5YmN5ZyoaW5kZXjph4zorr7nva7nmoTpvKDmoIfmi5bliqjnmoTlvZPliY3nmoR4LHnnmoTot53nprvjgILmiYDku6XvvIzmg7Pnp7vliqjljLnphY3lpb3nmoTlm77niYfvvIzpnIDopoHlnKjmlbTkuKrlrrnlmajliqDkuIrpvKDmoId4LHnnp7vliqjnmoTot53nprtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuYm91bmRzKSByZXR1cm5cbiAgICB0aGlzLnVwYWR0ZVgoKVxuICAgIHRoaXMudXBhZHRlWSgpXG5cblxuICB9XG5cblxuXG5cbn0iLCIvLyDov5nkuKrmlofku7bnmoTkuIrkuIDnuqfkuqTmjqXmmK9jb21wb25lbnRz55qEaW5kZXguanPmlofku7ZcbmltcG9ydCB7IENhbWVyYSwgUmVuZGVyZXIsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCc7XG5cbmltcG9ydCBIb21lIGZyb20gJy4vaG9tZSc7XG5pbXBvcnQgQWJvdXQgZnJvbSAnLi9hYm91dCc7XG5pbXBvcnQgQ29sbGVjdGlvbnMgZnJvbSAnLi9jb2xsZWN0aW9ucydcbmltcG9ydCBEZXRhaWwgZnJvbSAnLi9EZXRhaWwnO1xuXG5pbXBvcnQgVHJhbnNpdGlvbiBmcm9tICcuL1RyYW5zaXRpb24nXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gIGNvbnN0cnVjdG9yKHsgdGVtcGxhdGUgfSkge1xuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZVxuICAgIC8vIHRlbXBsYXRl5piv5pWw5o2u5qih54mIXG4gICAgdGhpcy54ID0ge1xuICAgICAgc3RhcnQ6IDAsXG4gICAgICBkaXN0YW5jZTogMCxcbiAgICAgIGVuZDogMFxuICAgIH1cbiAgICB0aGlzLnkgPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwXG4gICAgfVxuXG5cbiAgICB0aGlzLmNyZWF0ZVJlbmRlcmVyKClcbiAgICB0aGlzLmNyZWF0ZUNhbWVyYSgpXG4gICAgdGhpcy5jcmVhdGVTY2VuZSgpXG5cbiAgICB0aGlzLm9uUmVzaXplKClcblxuICAgIC8vIHRoaXMuY3JlYXRlQ3ViZSgpXG4gICAgLy8g5LuA5LmI5LuA5LmI5b+Y6K6wZGVmaW5l5LqG77yM5bCx55yL6L+Z6YeM5pyJ5rKh5pyJ6KKr5Yid5aeL5YyWXG4gIH1cblxuICBjcmVhdGVSZW5kZXJlcigpIHtcbiAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHtcbiAgICAgIGFscGhhOiB0cnVlLFxuICAgICAgLy8g6K6pd2ViZ2znmoTog4zmma/oibLpgI/mmI7vvIzku47ogIzmmL7npLpjc3Porr7nva7nmoTpopzoibJcbiAgICAgIGFudGlhbGlhczogdHJ1ZVxuICAgICAgLy8g5oqX6ZSv6b2/XG4gICAgfSk7XG5cbiAgICB0aGlzLmdsID0gdGhpcy5yZW5kZXJlci5nbDsgLy9USVAgd29ya3MgbGlrZSBhIGNhbnZhcyBjb250ZXh0XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZ2wuY2FudmFzKTtcbiAgfVxuXG4gIGNyZWF0ZUNhbWVyYSgpIHtcbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmEodGhpcy5nbClcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gNVxuXG4gIH1cblxuICBjcmVhdGVTY2VuZSgpIHtcbiAgICB0aGlzLnNjZW5lID0gbmV3IFRyYW5zZm9ybSgpXG4gIH1cblxuICAvKipcbiAgICogSG9tZS5cbiAgICovXG4gIGNyZWF0ZUhvbWUoKSB7XG4gICAgdGhpcy5ob21lID0gbmV3IEhvbWUoe1xuICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgfSk7XG5cbiAgfVxuXG4gIGRlc3Ryb3lIb21lKCkge1xuICAgIGlmICghdGhpcy5ob21lKSByZXR1cm5cbiAgICAvLyDlpoLmnpzkuI3lrZjlnKhob21l77yM5bCx6ZSA5q+BaG9tZe+8jO+8geaYr+S4jeaIkOeri+eahOaEj+aAne+8jOadoeS7tuS4uuWBh1xuICAgIHRoaXMuaG9tZS5kZXN0cm95KClcbiAgICB0aGlzLmhvbWUgPSBudWxsXG4gIH1cblxuXG4gIC8qKlxuICAgKiBBYm91dC5cbiAgICovXG4gIGNyZWF0ZUFib3V0KCkge1xuICAgIHRoaXMuYWJvdXQgPSBuZXcgQWJvdXQoe1xuICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95QWJvdXQoKSB7XG4gICAgaWYgKCF0aGlzLmFib3V0KSByZXR1cm5cbiAgICAvLyDlpoLmnpzkuI3lrZjlnKhhYm91dO+8jOWwsemUgOavgWFib3V077yM77yB5piv5LiN5oiQ56uL55qE5oSP5oCd77yM5p2h5Lu25Li65YGHXG4gICAgdGhpcy5hYm91dC5kZXN0cm95KClcbiAgICB0aGlzLmFib3V0ID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3Rpb25zLlxuICAgKi9cbiAgY3JlYXRlQ29sbGVjdGlvbnMoKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9ucyh7XG4gICAgICBnbDogdGhpcy5nbCxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lDb2xsZWN0aW9ucygpIHtcbiAgICBpZiAoIXRoaXMuY29sbGVjdGlvbnMpIHJldHVyblxuICAgIC8vIOWmguaenOS4jeWtmOWcqENvbGxlY3Rpb25z77yM5bCx6ZSA5q+BQ29sbGVjdGlvbnPvvIzvvIHmmK/kuI3miJDnq4vnmoTmhI/mgJ3vvIzmnaHku7bkuLrlgYdcbiAgICB0aGlzLmNvbGxlY3Rpb25zLmRlc3Ryb3koKVxuICAgIHRoaXMuY29sbGVjdGlvbnMgPSBudWxsXG4gIH1cblxuXG4gIC8qKlxuICAgKiBEZXRhaWwuXG4gICAqL1xuICBjcmVhdGVEZXRhaWwoKSB7XG4gICAgdGhpcy5kZXRhaWwgPSBuZXcgRGV0YWlsKHtcbiAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBzaXplczogdGhpcy5zaXplc1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveURldGFpbCgpIHtcbiAgICBpZiAoIXRoaXMuZGV0YWlsKSByZXR1cm5cbiAgICAvLyDlpoLmnpzkuI3lrZjlnKhkZXRhaWzvvIzlsLHplIDmr4FkZXRhaWzvvIzvvIHmmK/kuI3miJDnq4vnmoTmhI/mgJ3vvIzmnaHku7bkuLrlgYdcbiAgICB0aGlzLmRldGFpbC5kZXN0cm95KClcbiAgICB0aGlzLmRldGFpbCA9IG51bGxcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEVWRU5UU1xuICAgKi9cbiAgb25QcmVsb2FkZWQoKSB7XG4gICAgdGhpcy5vbkNoYW5nZUVuZCh0aGlzLnRlbXBsYXRlKVxuICB9XG5cbiAgb25DaGFuZ2VTdGFydCh0ZW1wbGF0ZSwgdXJsKSB7XG4gICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgIHRoaXMuYWJvdXQuaGlkZSgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMuaGlkZSgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLmhpZGUoKVxuICAgIH1cblxuICAgIHRoaXMuaXNGcm9tQ29sbGVjdGlvbnNUb0RldGFpbCA9IHRoaXMudGVtcGxhdGUgPT09ICdjb2xsZWN0aW9ucycgJiYgdXJsLmluZGV4T2YoJ2RldGFpbCcpID4gLTE7IC8vIHByZXR0aWVyLWlnbm9yZVxuICAgIHRoaXMuaXNGcm9tRGV0YWlsVG9Db2xsZWN0aW9ucyA9IHRoaXMudGVtcGxhdGUgPT09ICdkZXRhaWwnICYmIHVybC5pbmRleE9mKCdjb2xsZWN0aW9ucycpID4gLTE7IC8vIHByZXR0aWVyLWlnbm9yZVxuXG4gICAgLy8g5aaC5p6c5pivZGV0YWls5bm25LiULGNvbGxlY3Rpb25zIGFyZSB0aGUgcGFydCBvZiB0aGUgdXJs5LuW55qE5YC85bCx5pivPi0x55qEXG5cbiAgICBpZiAodGhpcy5pc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsIHx8IHRoaXMuaXNGcm9tRGV0YWlsVG9Db2xsZWN0aW9ucykge1xuICAgICAgdGhpcy50cmFuc2l0aW9uID0gbmV3IFRyYW5zaXRpb24oe1xuICAgICAgICBjb2xsZWN0aW9uczogdGhpcy5jb2xsZWN0aW9ucyxcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgICBzaXplczogdGhpcy5zaXplcyxcbiAgICAgICAgdXJsLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIG9uQ2hhbmdlRW5kKHRlbXBsYXRlKSB7XG4gICAgLy8g5bCx5piv5b2T55So5oi3Y2hhbmdlIHRoZSByb3V0ZVxuICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2Fib3V0Jykge1xuICAgICAgdGhpcy5jcmVhdGVBYm91dCgpXG4gICAgfSBlbHNlIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmRlc3Ryb3lBYm91dCgpXG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlID09PSAnY29sbGVjdGlvbnMnKSB7XG4gICAgICB0aGlzLmNyZWF0ZUNvbGxlY3Rpb25zKClcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuZGVzdHJveUNvbGxlY3Rpb25zKClcbiAgICB9XG5cbiAgICBpZiAodGVtcGxhdGUgPT09ICdkZXRhaWwnKSB7XG4gICAgICB0aGlzLmNyZWF0ZURldGFpbCgpXG4gICAgfSBlbHNlIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgdGhpcy5kZXN0cm95RGV0YWlsKClcbiAgICB9XG5cbiAgICBpZiAodGVtcGxhdGUgPT09ICdob21lJykge1xuICAgICAgdGhpcy5jcmVhdGVIb21lKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0cm95SG9tZSgpXG4gICAgfVxuXG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlXG5cbiAgfVxuXG4gIG9uUmVzaXplKCkge1xuICAgIC8vIOWwhua4suafk+eahOeUu+W4g+WwuuWvuOWhq+a7oeinhueql+WPo1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAvLyDliJvlu7rkuoZjYW1lcmHkuYvlkI7miY3og73liJvlu7rpgI/op4blm75cbiAgICB0aGlzLmNhbWVyYS5wZXJzcGVjdGl2ZSh7IGFzcGVjdDogd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQgfSk7XG5cbiAgICBjb25zdCBmb3YgPSB0aGlzLmNhbWVyYS5mb3YgKiAoTWF0aC5QSSAvIDE4MCk7XG4gICAgY29uc3QgaGVpZ2h0ID0gMiAqIE1hdGgudGFuKGZvdiAvIDIpICogdGhpcy5jYW1lcmEucG9zaXRpb24uejtcbiAgICBjb25zdCB3aWR0aCA9IGhlaWdodCAqIHRoaXMuY2FtZXJhLmFzcGVjdDtcblxuICAgIHRoaXMuc2l6ZXMgPSB7XG4gICAgICBoZWlnaHQsXG4gICAgICB3aWR0aCxcbiAgICB9O1xuXG4gICAgY29uc3QgdmFsdWVzID0geyBzaXplczogdGhpcy5zaXplcyB9XG5cbiAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgdGhpcy5hYm91dC5vblJlc2l6ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uUmVzaXplKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uUmVzaXplKHZhbHVlcyk7XG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaERvd24oZXZlbnQpIHtcbiAgICB0aGlzLmlzRG93biA9IHRydWVcbiAgICB0aGlzLnguc3RhcnQgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgIHRoaXMueS5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgICB4OiB0aGlzLngsXG4gICAgICB5OiB0aGlzLnlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgdGhpcy5hYm91dC5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaERvd24odmFsdWVzKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaE1vdmUoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNEb3duKSByZXR1cm5cblxuICAgIGNvbnN0IHggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgIGNvbnN0IHkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgdGhpcy54LmVuZCA9IHhcbiAgICB0aGlzLnkuZW5kID0geVxuXG5cbiAgICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgICB4OiB0aGlzLngsXG4gICAgICB5OiB0aGlzLnlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgdGhpcy5hYm91dC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgIHRoaXMuaG9tZS5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaFVwKGV2ZW50KSB7XG4gICAgdGhpcy5pc0Rvd24gPSBmYWxzZVxuICAgIGNvbnN0IHggPSBldmVudC5jaGFuZ2VkVG91Y2hlcyA/IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgY29uc3QgeSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzID8gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcblxuICAgIHRoaXMueC5lbmQgPSB4XG4gICAgdGhpcy55LmVuZCA9IHlcblxuICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueVxuICAgIH1cblxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0Lm9uVG91Y2hVcCh2YWx1ZXMpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICB0aGlzLmhvbWUub25Ub3VjaFVwKHZhbHVlcylcbiAgICB9XG4gIH1cblxuICBvbldoZWVsKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLm9uV2hlZWwoZXZlbnQpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgIHRoaXMuY29sbGVjdGlvbnMub25XaGVlbChldmVudClcbiAgICB9XG4gIH1cblxuICAvLyBMb29wXG4gIHVwZGF0ZShzY3JvbGwpIHtcbiAgICAvLyDlrp7ml7bmuLLmn5NcbiAgICAvLyB0aGlzLm1lc2gucm90YXRpb24ueCArPSAwLjAxXG4gICAgLy8gdGhpcy5tZXNoLnJvdGF0aW9uLnkgKz0gMC4wMVxuICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICB0aGlzLmFib3V0LnVwZGF0ZShzY3JvbGwpXG4gICAgfVxuICAgIC8vIOWboOS4uuWPquaciWFib3V0IHBhZ2XmnInkuIvmu5FcblxuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICB0aGlzLmNvbGxlY3Rpb25zLnVwZGF0ZSgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgdGhpcy5ob21lLnVwZGF0ZSgpXG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXIoe1xuICAgICAgY2FtZXJhOiB0aGlzLmNhbWVyYSxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lXG4gICAgfSlcbiAgfVxufSIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjBmODNiYmMzZmY5NjI3YTBkYTYxXCIpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwidGhpcyIsImVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZW9tZXRyeSIsIlBsYW5lIiwiY3JlYXRlVGV4dHVyZSIsImNyZWF0ZVByb2dyYW0iLCJjcmVhdGVNZXNoIiwiaW1hZ2UiLCJnZXRBdHRyaWJ1dGUiLCJ0ZXh0dXJlIiwid2luZG93IiwiVEVYVFVSRVMiLCJwcm9ncmFtIiwiUHJvZ3JhbSIsImZyYWdtZW50IiwidmVydGV4IiwidW5pZm9ybXMiLCJ1QWxwaGEiLCJ2YWx1ZSIsInRNYXAiLCJtZXNoIiwiTWVzaCIsInNldFBhcmVudCIsImNyZWF0ZUJvdW5kcyIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwYWR0ZVNjYWxlIiwidXBhZHRlWCIsInVwYWR0ZVkiLCJzaG93IiwiaGlkZSIsIm9uUmVzaXplIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJzY2FsZSIsIngiLCJ5IiwibGVmdCIsInBvc2l0aW9uIiwidG9wIiwidXBkYXRlIiwiQ2FudmFzIiwidGVtcGxhdGUiLCJzdGFydCIsImRpc3RhbmNlIiwiZW5kIiwiY3JlYXRlUmVuZGVyZXIiLCJjcmVhdGVDYW1lcmEiLCJjcmVhdGVTY2VuZSIsInJlbmRlcmVyIiwiUmVuZGVyZXIiLCJhbHBoYSIsImFudGlhbGlhcyIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNhbnZhcyIsImNhbWVyYSIsIkNhbWVyYSIsInoiLCJUcmFuc2Zvcm0iLCJjcmVhdGVIb21lIiwiaG9tZSIsIkhvbWUiLCJkZXN0cm95SG9tZSIsImRlc3Ryb3kiLCJjcmVhdGVBYm91dCIsImFib3V0IiwiQWJvdXQiLCJkZXN0cm95QWJvdXQiLCJjcmVhdGVDb2xsZWN0aW9ucyIsImNvbGxlY3Rpb25zIiwiQ29sbGVjdGlvbnMiLCJkZXN0cm95Q29sbGVjdGlvbnMiLCJjcmVhdGVEZXRhaWwiLCJkZXRhaWwiLCJEZXRhaWwiLCJkZXN0cm95RGV0YWlsIiwib25QcmVsb2FkZWQiLCJvbkNoYW5nZUVuZCIsIm9uQ2hhbmdlU3RhcnQiLCJ1cmwiLCJpc0Zyb21Db2xsZWN0aW9uc1RvRGV0YWlsIiwiaW5kZXhPZiIsImlzRnJvbURldGFpbFRvQ29sbGVjdGlvbnMiLCJ0cmFuc2l0aW9uIiwiVHJhbnNpdGlvbiIsInNldFNpemUiLCJwZXJzcGVjdGl2ZSIsImFzcGVjdCIsImZvdiIsIk1hdGgiLCJQSSIsInRhbiIsInZhbHVlcyIsIm9uVG91Y2hEb3duIiwiZXZlbnQiLCJpc0Rvd24iLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hVcCIsImNoYW5nZWRUb3VjaGVzIiwib25XaGVlbCIsInNjcm9sbCIsInJlbmRlciIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==