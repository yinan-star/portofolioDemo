/*! For license information please see main.38f790655baadd7c7a9d.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/collections/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var l=s("./node_modules/ogl/src/core/Transform.js"),i=s("./node_modules/ogl/src/extras/Plane.js"),r=s("./node_modules/gsap/index.js"),o=s("./node_modules/prefix/index.js"),n=s.n(o),c=s("./node_modules/lodash/map.js"),h=s.n(c),a=s("./app/components/Canvas/collections/Media.js");const d=class{constructor({gl:t,scene:e,sizes:s,transition:i}){this.transition=i,this.id="collections",this.gl=t,this.scene=e,this.sizes=s,this.transformPrefix=n()("transform"),this.group=new l.Transform,this.galleryElement=document.querySelector(".collections__gallery"),this.galleryWrapperElement=document.querySelector(".collections__gallery__wrapper"),this.titlesElement=document.querySelector(".collections__titles"),this.collectionsElements=document.querySelectorAll(".collections__article"),this.collectionsElementsActive="collections__article--active",this.mediasElements=document.querySelectorAll(".collections__gallery__media"),this.scroll={current:0,target:0,lerp:.1},this.scroll={current:0,target:0,last:0,lerp:.1,velocity:1},this.createGeometry(),this.createGallery(),this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new i.Plane(this.gl)}createGallery(){this.medias=h()(this.mediasElements,((t,e)=>new a.default({element:t,geometry:this.geometry,gl:this.gl,index:e,scene:this.group,sizes:this.sizes})))}show(){this.transition&&this.transition.animate(this.medias[0].mesh,(t=>{})),h()(this.medias,(t=>t.show()))}hide(){h()(this.medias,(t=>t.hide()))}onResize(t){this.sizes=t.sizes,this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,h()(this.medias,(e=>e.onResize(t,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:t,y:e}){this.scroll.last=this.scroll.current}onTouchMove({x:t,y:e}){const s=t.start-t.end;this.scroll.target=this.scroll.last-s}onTouchUp({x:t,y:e}){}onWheel({pixelY:t}){this.scroll.target+=t}onChange(t){this.index=t;const e=parseInt(this.mediasElements[this.index].getAttribute("data-index"));h()(this.collectionsElements,((t,s)=>{s===e?t.classList.add(this.collectionsElementsActive):t.classList.remove(this.collectionsElementsActive)})),this.titlesElement.style[this.transformPrefix]=`translateY(-${25*e}%) translate(-50%, -50%) rotate(-90deg)`}update(){this.scroll.target=r.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=r.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transformPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current;const t=Math.floor(Math.abs((this.scroll.current-this.medias[0].bounds.width/2)/this.scroll.limit)*(this.medias.length-1));this.index!==t&&this.onChange(t),h()(this.medias,((t,e)=>{t.update(this.scroll.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"e63297ee0fb046c04e61"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekUsS0FBS0gsTUFBTTZFLFlBQVkxRSxLQUFLSSxNQUNoQyxrQkM1TEp1RSxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL2NvbGxlY3Rpb25zL2luZGV4LmpzIiwid2VicGFjazovL2Zsb2VtYS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJztcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgUHJlZml4IGZyb20gJ3ByZWZpeCdcblxuaW1wb3J0IG1hcCBmcm9tICdsb2Rhc2gvbWFwJ1xuXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHsgZ2wsIHNjZW5lLCBzaXplcyx0cmFuc2l0aW9uIH0pIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcbiAgICAgICAgdGhpcy5pZCA9ICdjb2xsZWN0aW9ucyc7XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplcztcblxuICAgICAgICB0aGlzLnRyYW5zZm9ybVByZWZpeCA9IFByZWZpeCgndHJhbnNmb3JtJylcbiAgICAgICAgdGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKTtcblxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGxlY3Rpb25zX19nYWxsZXJ5JylcbiAgICAgICAgdGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX3dyYXBwZXInKVxuXG4gICAgICAgIHRoaXMudGl0bGVzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19fdGl0bGVzJylcblxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sbGVjdGlvbnNfX2FydGljbGUnKVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUgPSAnY29sbGVjdGlvbnNfX2FydGljbGUtLWFjdGl2ZSdcblxuICAgICAgICB0aGlzLm1lZGlhc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICAgICcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX21lZGlhJ1xuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgICAgICAgY3VycmVudDogMCxcbiAgICAgICAgICAgIHRhcmdldDogMCxcbiAgICAgICAgICAgIGxlcnA6IDAuMVxuICAgICAgICB9XG5cblxuICAgICAgICB0aGlzLnNjcm9sbCA9IHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICAgICAgICB0YXJnZXQ6IDAsXG4gICAgICAgICAgICBsYXN0OiAwLFxuICAgICAgICAgICAgbGVycDogMC4xLFxuICAgICAgICAgICAgdmVsb2NpdHk6IDFcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3JlYXRlR2VvbWV0cnkoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVHYWxsZXJ5KCk7XG5cbiAgICAgICAgdGhpcy5vblJlc2l6ZSh7c2l6ZXM6IHRoaXMuc2l6ZXN9KTtcblxuICAgICAgICB0aGlzLmdyb3VwLnNldFBhcmVudCh0aGlzLnNjZW5lKTtcblxuICAgICAgICB0aGlzLnNob3coKVxuICAgICAgICAvLyDlp5DvvIxjb25zdHJ1Y3RvcuagvOW8j+aYryh7fSl7feOAguS4jeimgeW/mOiusOS6hlxuXG4gICAgfVxuXG4gICAgY3JlYXRlR2VvbWV0cnkoKSB7XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgUGxhbmUodGhpcy5nbClcbiAgICB9XG5cbiAgICBjcmVhdGVHYWxsZXJ5KCkge1xuICAgICAgICAvLyDkvKDliLBNZWRpYemHjOmdolxuICAgICAgICB0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhc0VsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWVkaWEoe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgc2NlbmU6IHRoaXMuZ3JvdXAsXG4gICAgICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIEFuaW1hdGlvbnNcbiAgICBzaG93KCkge1xuICAgICAgICBpZih0aGlzLnRyYW5zaXRpb24pe1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uLmFuaW1hdGUodGhpcy5tZWRpYXNbMF0ubWVzaCwgXyA9PntcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5zaG93KCkpXG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuaGlkZSgpKVxuICAgIH1cblxuICAgIC8vIEV2ZW50c1xuICAgIG9uUmVzaXplKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2l6ZXMgPSBldmVudC5zaXplc1xuICAgICAgICAvLyDlsY/luZXnmoTlsLrlr7jvvIznu5l1cGRhdGXogIzkuI3mmK/nlLvluIPnmoRcbiAgICAgICAgdGhpcy5ib3VuZHMgPSB0aGlzLmdhbGxlcnlXcmFwcGVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAvLyDojrflj5blhYPntKDnmoTkvY3nva7lkozlsLrlr7hcblxuICAgICAgICAvLyDorqHnrpflvZPliY3nlLvlu4rnmoTlrr3luqbljaDop4bnqpflj6PnmoTlrr3luqbnmoTlpJrlsJHnhLblkI7kuZjku6XlhbfkvZPnmoTlrr3luqYtLT7lsIblhYPntKDlnKjop4blj6PkuK3nmoTmr5TkvovovazmjaLkuLrlhbfkvZPnmoTlrp7pmYXlrr3luqbjgILlk43lupTlvI/luIPlsYBcbiAgICAgICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcblxuICAgICAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLm9uUmVzaXplKGV2ZW50LCB0aGlzLnNjcm9sbCkpXG4gICAgICAgIHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoXG5cbiAgICB9XG5cbiAgICBvblRvdWNoRG93bih7IHgsIHkgfSkge1xuICAgICAgICB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuICAgIH1cblxuICAgIG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwubGFzdCAtIGRpc3RhbmNlXG4gICAgICAgIC8vIOWmguaenOm8oOagh+WSjOWbvueJh+eahOenu+WKqOebuOWPjeaWueWQke+8jOimgeeUqOWHj+WPt1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNjcm9sbC50YXJnZXQsIGRpc3RhbmNlKVxuICAgICAgICAvLyDlpoLmnpzlm77niYfkuI3og73np7vliqjvvIznnIvkuIvpvKDmoIfog73kuI3og73np7vliqjmlbDmja7vvIzlpoLmnpzpvKDmoIfog73np7vliqjmlbDmja7vvIzpgqPlsLHmmK/msqHmnInmiorov5nkuKrlgLznu5nliLBtZWRpYeiuqeWbvueJh+enu+WKqFxuICAgIH1cblxuICAgIG9uVG91Y2hVcCh7IHgsIHkgfSkge1xuXG4gICAgfVxuXG4gICAgb25XaGVlbCh7IHBpeGVsWSB9KSB7XG4gICAgICAgIC8vIOaNleiOt+a7muWKqOS6i+S7tueahOWDj+e0oOWAvO+8jOeEtuWQjuagueaNrui/meS6m+WAvOadpeabtOaWsOmhtemdouS4reafkOS6m+WFg+e0oOeahOS9jee9ruaIlueKtuaAge+8jOWunueOsOmhtemdoueahOa7muWKqOaIluinhuWbvueahOWPmOWMllxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hhbmdlZOiBlOWKqOWKqOeUu+WbvueJh+aWh+Wtl+agh+mimFxuICAgICAqL1xuICAgIG9uQ2hhbmdlIChpbmRleCl7XG4gICAgICAgIC8vIOS7juWFtuS7luWcsOaWueaOpeWPl+e0ouW8lSzpvKDmoIfmu5HliqjvvIzlt6bkuIvop5LmloflrZflhoXlrrnot5/nnYDlm77niYflj5jljJZcbiAgICAgICAgdGhpcy5pbmRleCA9aW5kZXhcblxuICAgICAgICBjb25zdCBzZWxlY3RlZENvbGxlY3Rpb24gPSBwYXJzZUludCh0aGlzLm1lZGlhc0VsZW1lbnRzW3RoaXMuaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpKVxuXG4gICAgICAgIG1hcCh0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHMsIChlbGVtZW50LGVsZW1lbnRJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYoZWxlbWVudEluZGV4ID09PSBzZWxlY3RlZENvbGxlY3Rpb24pe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb2xsZWN0aW9uc0VsZW1lbnRzQWN0aXZlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMudGl0bGVzRWxlbWVudC5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgdHJhbnNsYXRlWSgtJHsyNSAqIHNlbGVjdGVkQ29sbGVjdGlvbn0lKSB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC05MGRlZylgXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKCAtdGhpcy5zY3JvbGwubGltaXQsIDAsIHRoaXMuc2Nyb2xsLnRhcmdldClcbiAgICAgICAgLy8g5rua5Yqo5rua6L2u6ZmQ5Yi2XG5cbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5zY3JvbGwudGFyZ2V0LCB0aGlzLnNjcm9sbC5sZXJwKVxuXG4gICAgICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQuc3R5bGVbdGhpcy50cmFuc2Zvcm1QcmVmaXhdID0gYHRyYW5zbGF0ZVgoJHt0aGlzLnNjcm9sbC5jdXJyZW50fXB4KWBcbiAgICAgICAgLy8g5bCG5Zu+54mH6ZO+5o6l55qE5a655ZmobWF0Y2jmu5rliqjnmoTlnZDmoIfpmo/nnYDlm77niYfkuIDotbfmu5rogIzkuI3mmK/lgZzlnKjljp/lnLBcblxuICAgICAgICBpZiAodGhpcy5zY3JvbGwubGFzdCA8IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdyaWdodCdcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbC5sYXN0ID4gdGhpcy5zY3JvbGwuY3VycmVudCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGwuZGlyZWN0aW9uID0gJ2xlZnQnXG4gICAgICAgIH1cbiAgICAgICAgLy8g5qOA5rWL6byg5qCH5rua5Yqo5pa55ZCR77yM5b2T5YmN5L2N572u5ZKM5YWI5YmN5L2N572u5YGa5q+U6L6D44CCXG5cbiAgICAgICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcblxuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoIE1hdGguYWJzKCAodGhpcy5zY3JvbGwuY3VycmVudCAtIHRoaXMubWVkaWFzWzBdLmJvdW5kcy53aWR0aCAvIDIpIC8gdGhpcy5zY3JvbGwubGltaXQgKSAqICh0aGlzLm1lZGlhcy5sZW5ndGggLSAxKSApOyBcbiAgICAgICAgLy/lh4/ljrvkuIDljYrnmoTljaHniYflrr3luqYs5L2/5b6X5o+Q5YmNaGlnaGxpZ2h05Y2h54mHLOiAjOS4jeaYr+etieWIsOWNoeeJh3novbTkuK3lv4PmiY3mv4DmtLvlsLHmhaLkuoZcbiAgICAgICAgLy8gTWF0aC5mbG9vcizlj5bmlbTmlbDvvIzmu5rliqjnibnlrprot53nprvlkI7noa7lrprlm77niYflhYPntKDlnKjmlbDnu4TkuK3nmoTntKLlvJVcbiAgICAgICAgaWYodGhpcy5pbmRleCAhPT0gaW5kZXgpe1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZShpbmRleCkgIFxuICAgICAgICB9XG5cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5pbmRleClcbiAgICAgICAgICAgIC8vIG1lZGlhLm1lc2gucG9zaXRpb24ueSArPSBNYXRoLmNvcygobWVkaWEubWVzaC5wb3NpdGlvbi54IC8gdGhpcy5zaXplcy53aWR0aCkgKiBNYXRoLlBJICogMC4xKSAqIDQwIC0gNDBcbiAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyDkvKDnu5ltZWRpYeaWh+S7tizlsIblvZPliY3nmoTpvKDmoIfmu5rliqjkvY3nva7kvKDnu5ltZWRpYVxuXG4gICAgICAgXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveVxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlQ2hpbGQodGhpcy5ncm91cClcbiAgICB9XG5cbn0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJlNjMyOTdlZTBmYjA0NmMwNGU2MVwiKSJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImdsIiwic2NlbmUiLCJzaXplcyIsInRyYW5zaXRpb24iLCJ0aGlzIiwiaWQiLCJ0cmFuc2Zvcm1QcmVmaXgiLCJQcmVmaXgiLCJncm91cCIsIlRyYW5zZm9ybSIsImdhbGxlcnlFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2FsbGVyeVdyYXBwZXJFbGVtZW50IiwidGl0bGVzRWxlbWVudCIsImNvbGxlY3Rpb25zRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29sbGVjdGlvbnNFbGVtZW50c0FjdGl2ZSIsIm1lZGlhc0VsZW1lbnRzIiwic2Nyb2xsIiwiY3VycmVudCIsInRhcmdldCIsImxlcnAiLCJsYXN0IiwidmVsb2NpdHkiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJvblJlc2l6ZSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJhbmltYXRlIiwibWVzaCIsIl8iLCJtZWRpYSIsImhpZGUiLCJldmVudCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxpbWl0Iiwid2lkdGgiLCJjbGllbnRXaWR0aCIsIm9uVG91Y2hEb3duIiwieCIsInkiLCJvblRvdWNoTW92ZSIsImRpc3RhbmNlIiwic3RhcnQiLCJlbmQiLCJvblRvdWNoVXAiLCJvbldoZWVsIiwicGl4ZWxZIiwib25DaGFuZ2UiLCJzZWxlY3RlZENvbGxlY3Rpb24iLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImVsZW1lbnRJbmRleCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInN0eWxlIiwidXBkYXRlIiwiR1NBUCIsInV0aWxzIiwiY2xhbXAiLCJpbnRlcnBvbGF0ZSIsImRpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsImFicyIsImxlbmd0aCIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==